

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Smart Spot - Development Guide &mdash; HOP Ubiquitous Documentation 1.4.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="HOP Ubiquitous Documentation 1.4.0 documentation" href="index.html"/>
        <link rel="next" title="HOP Ubiquitous - Relevant Links" href="links.html"/>
        <link rel="prev" title="Smart Spot - Quick Guide" href="quick.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> HOP Ubiquitous Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick.html">Smart Spot - Quick Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Smart Spot - Development Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#homard-api-rest">Homard API REST</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#api-restful">API-RESTFul</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cached-synchronous-restful-api">Cached Synchronous RESTFul API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asynchronous-restful-api">Asynchronous RESTFul API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#historical-data-restful-api">Historical Data RESTFul API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#homard-restful-api-examples">Homard RESTFul API Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#synchronous-restful-api-examples">Synchronous RESTFul API Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asynchronous-restful-api-examples">Asynchronous RESTFul API Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asynchronous-api-observes">Asynchronous API: Observes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asynchronous-api-customizing-observer-notification-message-integrating-with-third-party-platform-that-requires-a-specific-format">Asynchronous API: Customizing observer notification message (integrating with third party platform that requires a specific format)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#url-manager-physical-web-configuration-for-advertising-urls">URL Manager (Physical Web configuration for advertising URLs)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#url-manager-restful-api">URL Manager RESTFul API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#url-manager-restful-api-examples">URL Manager RESTFul API Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fiware-integration">Fiware Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#oma-lwm2m-iot-agent">OMA LwM2M IoT Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="#orion-context-broker">Orion Context Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cygnus">Cygnus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fiware-architecture">FIWARE architecture</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#orion-context-broker-ngsi-restful-api">Orion Context Broker NGSI RESTFul API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-entity-v2">Create entity v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entity-v2">Retrieve entity v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entity-as-data-model-v2">Retrieve entity as data model v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entities-v2">Retrieve entities v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entities-as-data-model-v2">Retrieve entities as data model v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-entity-v2">Update entity v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-entity-v2">Delete entity v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-attribute-for-entity-v2">Create attribute for entity v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entity-attribute-v2">Retrieve entity attribute v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entity-attribute-as-data-model-v2">Retrieve entity attribute as data model v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-attribute-for-entity-v2">Delete attribute for entity v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-types-v2">Retrieve types v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-subscription-v2">Create subscription v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-subscriptions-v2">Retrieve subscriptions v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remove-subscriptions-v2">Remove subscriptions v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-context-entity-v1">Create context entity v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-context-entity-v1">Retrieve context entity v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-update-entity-v1">Create/update entity v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-entity-v1">Create entity v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entity-standard-v1">Retrieve entity standard v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entity-as-object-standard-v1">Retrieve entity as object standard v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entity-convenience-v1">Retrieve entity convenience v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entities-as-object-convenience-v1">Retrieve entities as object convenience v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entities-v1">Retrieve entities v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entities-as-object-v1">Retrieve entities as object v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entities-for-type-v1">Retrieve entities for type v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entities-for-type-as-object-v1">Retrieve entities for type as object v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-entity-v1">Delete entity v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-update-entity-attribute-v1">Create/update entity attribute v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entity-attribute-v1">Retrieve entity attribute v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-entity-attribute-as-object-v1">Delete entity attribute as object v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entities-attribute-for-type-v1">Retrieve entities attribute for type v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-entities-attribute-for-type-as-object-v1">Retrieve entities attribute for type as object v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-entity-attribute-v1">Delete entity attribute v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-type-v1">Retrieve type v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-types-v1">Retrieve types v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-context-subscription-standard-v1">Create context subscription standard v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-context-subscription-standard-v1">Update context subscription standard v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-context-subscription-convenience-v1">Update context subscription convenience v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-context-subscription-standard-v1">Delete context subscription standard v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-context-subscription-convenience-v1">Delete context subscription convenience v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-subscription-standard-v1">Create subscription standard v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-subscription-convenience-v1">Create subscription convenience v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-subscription-standard-v1">Update subscription standard v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-subscription-convenience-v1">Update subscription convenience v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-subscription-v1">Delete subscription v1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#annex-1-oma-lwm2m">ANNEX 1: OMA LwM2M</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#resource-model">Resource model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#objects">Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#attributes">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clients-and-servers">Clients and servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bootstrap-interface">Bootstrap Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#client-registration-interface">Client Registration Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#device-management-and-service-enablement-interface">Device Management and Service Enablement Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#information-reporting-interface">Information Reporting Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#annex-2-fiware-docker-architecture">ANNEX 2: FIWARE-DOCKER Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mongodb">MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sth-comet">STH-Comet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Cygnus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Orion Context Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iot-agent">IoT Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grafana">Grafana</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quantumleap">QuantumLeap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cratedb">CrateDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#perseo-core">Perseo-core</a></li>
<li class="toctree-l3"><a class="reference internal" href="#perseo-fe">Perseo-fe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#annex-3-sth-comet-restful-api">ANNEX 3: STH-Comet RESTFul API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-raw-values-with-pagination">Retrieve raw values with pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-raw-values-with-pagination-and-filetype">Retrieve raw values with pagination and filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values">Retrieve n raw values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-with-pagination">Retrieve n raw values with pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-with-filetype">Retrieve n raw with filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-with-pagination-and-filetype">Retrieve n raw values with pagination and filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-raw-values-between-two-dates-with-pagination">Retrieve raw values between two dates with pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-between-two-dates">Retrieve n raw values between two dates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-raw-value-between-two-dates-with-pagination-and-filetype">Retrieve raw value between two dates with pagination and filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-between-two-dates-with-pagination">Retrieve n raw values between two dates with pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-between-two-dates-with-filetype">Retrieve n raw values between two dates with filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-between-two-dates-with-pagination-and-filetype">Retrieve n raw values between two dates with pagination and filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-raw-values-after-a-date-with-pagination">Retrieve raw values after a date with pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-after-date-with-pagination">Retrieve n raw values after date with pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-raw-values-after-date-with-pagination-and-filetype">Retrieve raw values after date with pagination and filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-after-date">Retrieve n raw values after date</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-after-date-with-filetype">Retrieve n raw values after date with filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-after-date-with-pagination-and-filetype">Retrieve n raw values after date with pagination and filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-before-date-with-pagination-and-filetype">Retrieve n raw values before date with pagination and filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-before-date-with-pagination">Retrieve n raw values before date with pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-before-date-with-filetype">Retrieve n raw values before date with filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-n-raw-values-before-date">Retrieve n raw values before date</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-raw-values-before-date-with-pagination">Retrieve raw values before date with pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-raw-values-before-date-with-pagination-and-filetype">Retrieve raw values before date with pagination and filetype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-aggregated-values">Retrieve aggregated values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-aggregate-values-between-two-dates">Retrieve aggregate values between two dates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-aggregate-values-after-date">Retrieve aggregate values after date</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-aggregate-values-before-date">Retrieve aggregate values before date</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#annex-4-cygnus-restful-api">ANNEX 4: Cygnus RESTFul API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-admin-login-v0">Retrieve admin login v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-admin-login-v0">Update admin login v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-agent-parameter-v0">Create agent parameter v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-agent-parameter-v0">Retrieve agent parameter v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-agent-parameters-v0">Retrieve agent parameters v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-agent-parameter-v0">Update agent parameter v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-agent-parameter-v0">Delete agent parameter v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-instance-parameter-v0">Create instance parameter v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-instance-parameter-v0">Retrieve instance parameter v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">Retrieve instance parameter v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-parameter-instance-v0">Delete parameter instance v0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-agent-parameter-v1-beta">Create agent parameter v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-agent-parameter-v1-beta">Retrieve agent parameter v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-agent-parameters-v1-beta">Retrieve agent parameters v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-agent-parameter-v1-beta">Update agent parameter v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-agent-parameter-v1-beta">Delete agent parameter v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-parameter-instance-v1-beta">Delete parameter instance v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-version-v1-beta">Retrieve version v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-grouping-rules-v1-beta">Create grouping rules v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-grouping-rules-v1-beta">Retrieve grouping rules v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-grouping-rules-v1-beta">Update grouping rules v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-grouping-rules-v1-beta">Delete grouping rules v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-subscription-for-orion-v1-beta">Create subscription for Orion v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-subscription-for-orion-v2-beta">Create subscription for Orion v2 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-subscription-v1-beta">Retrieve subscription v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-subscriptions-v1-beta">Retrieve subscriptions v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-subscription-v1-beta">Delete subscription v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-appender-v1-beta">Create appender v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-appender-v1-beta">Retrieve appender v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-appenders-v1-beta">Retrieve appenders v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-appender-v1-beta">Update appender v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-appender-v1-beta">Delete appender v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-appenders-v1-beta">Delete appenders v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-logger-v1-beta">Create logger v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-logger-v1-beta">Retrieve logger v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-loggers-v1-beta">Retrieve loggers v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-logger-v1-beta">Update logger v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-logger-v1-beta">Delete logger v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-loggers-v1-beta">Delete loggers v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metrics">Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-metrics-v1-beta">Retrieve metrics v1 (beta)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-metrics-v1-beta">Delete metrics v1 (beta)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#annex-5-iot-agent-lwm2m-restful-api">ANNEX 5: IoT Agent LwM2M RESTFul API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-device-provisioning">Create device Provisioning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#annex-6-deploy-and-use-of-grafana">ANNEX 6: Deploy and use of Grafana</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creation-and-execution-of-the-image-in-docker">Creation and execution of the image in Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-source-definition-to-grafana">Data source definition to Grafana</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-quantumleap-s-subscription-to-orion">Create QuantumLeap’s subscription to Orion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connection-of-grafana-with-cratedb">Connection of Grafana with CrateDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-graphs-in-the-dashboard">Create graphs in the dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="#realise-the-query-to-the-cratedb-database">Realise the query to the CrateDB database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#annex-7-perseo-cep">ANNEX 7: Perseo CEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="#annex-7-1-perseo-core">ANNEX 7.1: Perseo-Core</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-rules">Retrieve rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-rule">Retrieve rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-update-rule">Create/Update rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-rule">Update rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-rule">Delete rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-event">Create event</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-log">Retrieve log</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-log-level">Update log level</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#annex-7-2-perseo-fe">ANNEX 7.2: Perseo-Fe</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-version">Retrieve version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Retrieve rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">Retrieve rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">Delete rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-rule">Create rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-notification">Create notification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-visual-rules">Retrieve visual rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-visual-rule">Retrieve visual rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-visual-rule">Create visual rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-visual-rule">Delete visual rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-visual-rule">Update visual rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">Retrieve log</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-log-level">Retrieve log level</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#annex-7-3-perseo-use-cases">ANNEX 7.3: Perseo Use Cases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#update">Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#post">Post</a></li>
<li class="toctree-l3"><a class="reference internal" href="#twitter">Twitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#e-mail">E-mail</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sms">SMS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="links.html">HOP Ubiquitous - Relevant Links</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HOP Ubiquitous Documentation</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Smart Spot - Development Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/development.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="smart-spot-development-guide">
<h1>Smart Spot - Development Guide<a class="headerlink" href="#smart-spot-development-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="homard-api-rest">
<h2>Homard API REST<a class="headerlink" href="#homard-api-rest" title="Permalink to this headline">¶</a></h2>
<p>Homard offers in top of the OMA LwM2M server a RESTFul services such as mechanism to communicate with the OMA LwM2M server. This HTTP/HTTPS API RESTFul allows users to manage connected devices connected to the server.</p>
<p>Homard shows connected devices, and manages each of them. Inherit from OMA, the devices expose a set of objects/resources, which can contain one or more instances, and each instance, contains the final resources. Some objects allow multiple instances (such as a Digital I/O Object, which represents the different digital inputs and outputs from the Smart Spot, which can be used to control relays, read external added digital sensors etc.) and others only one instance (such as Device Object). Numbers are used to identify the tuple (Object ID / Instance ID / Resource ID).</p>
<p>There are two API types: Synchronous and Asynchronous:</p>
<ul class="simple">
<li><strong>Synchronous API</strong> provides the data as part of the reply to a request in near-real time; it is used mainly for data which is available in Homard platform internally. Therefore, non-external delays are introduced and a very fast reply can be offered.</li>
<li><strong>Asynchronous API</strong> is required mainly for the data coming from the sensors (i.e. Smart Spot); since the value will be available when the Smart Spot replies to the request to Homard; delays can be introduced due to issues such as communication latency (GPRS, WiFi etc. latency), sensors reading time (specially sensors such as air quality which includes a processing time of few seconds), and finally due to duty cycle from the Smart Spot in order to optimize energy (battery or solar panels powered). For that reason, Asynchronous API will requires a callback address to inform when the value is available.</li>
</ul>
<p>Information returned by the API is encapsulated into a JSON data structure, since is the best way to communicate with high level applications (commonly developed in Java, JavaScript and Android).</p>
<p>More info in: <a class="reference external" href="https://homard.hopu.eu/indexPage/wiki.html">https://homard.hopu.eu/indexPage/wiki.html</a></p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="4%" />
<col width="60%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTP PATH</th>
<th class="head">Method</th>
<th class="head">Description</th>
<th class="head">Result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/api/rest</td>
<td>GET</td>
<td>Returns all OMA clients connected to HOMARD</td>
<td>[{client1},{client2},…{clientN}]</td>
</tr>
<tr class="row-odd"><td>/api/rest/{endpoint_id}</td>
<td>GET</td>
<td>Returns the client description for a {endpoint_id}</td>
<td>{client}</td>
</tr>
<tr class="row-even"><td>/api/rest/{endpoint_id}/{resource}?proto={https|http}&amp;cburl={DESTINATION_URL}</td>
<td>GET</td>
<td>Returns resource {resource} from client {endpoint_id} to destination callback URL</td>
<td>[{resource1},{resource2},…,{resourceN}]</td>
</tr>
<tr class="row-odd"><td>/api/rest/{endpoint_id}/{resource}?proto={http|https}&amp;cburl={DESTINATION_URL}</td>
<td>PUT</td>
<td>Changes value of the resource {resource} on client {endpoint_id}. Content type need to be application/JSON and in the request body {“id”: 2, “value”: new_value}</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>/api/rest/{endpoint_id}/{resource}/co (Requires POST JSON payload)</td>
<td>POST</td>
<td>Sets observe on the resource {resource} and, when the resource value is between ‘cbmin’ and ‘cbmax’, posts its value on ‘URL’. Note that if cbmin and cbmax are omitted then all values will be tracked.</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>/api/rest/{endpoint_id}/{resource}/observe</td>
<td>DELETE</td>
<td>Stops the monitoring on resource {resource}</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="section" id="api-restful">
<h3>API-RESTFul<a class="headerlink" href="#api-restful" title="Permalink to this headline">¶</a></h3>
<p>There are two API types synchronous and asynchronous, on one hand it is synchronous API, that corresponds with Server request such as get the client list, get a client specific data or list the observes set on a device. On the other hand it is device request. The device requests are launched on background, this means that the response will send to a callback URL defined by the client. This API requires the HTTP basic authentication using a Homard account.</p>
<p>The following diagram shows the differences between synchronous and asynchronous API.</p>
<a class="reference internal image-reference" href="_images/homard-apiRestful-diagram.png"><img alt="Homard API RESTFul Diagram" class="align-center" src="_images/homard-apiRestful-diagram.png" style="width: 527px; height: 174px;" /></a>
<p>This subsection will present the synchronous API and an example. The available synchronous API resources are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="40%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTP METHOD</th>
<th class="head">Path</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GET</td>
<td>/api/rest/</td>
<td>Lists all connected clients with their current data</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>/api/rest/{endpoint_id}</td>
<td>Get specific connected client data</td>
</tr>
<tr class="row-even"><td>GET</td>
<td>/api/rest/cached/{endpoint_id}/{resource}</td>
<td>Read the resource cached value (last value)</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>/api/rest/{endpoint_id}/co</td>
<td>List client observes</td>
</tr>
<tr class="row-even"><td>POST</td>
<td>/api/rest/{endpoint_id}/{resource}/observe</td>
<td>Observes the selected resource and updates the internal cache.</td>
</tr>
<tr class="row-odd"><td>DELETE</td>
<td>/api/rest/{endpoint_id}/{resource_path}/observe</td>
<td>Removes selected client observer</td>
</tr>
<tr class="row-even"><td>DELETE</td>
<td>/api/rest/{endpoint_id}/{resource_path}/co/{coID}</td>
<td>Removes selected client composite observer</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="cached-synchronous-restful-api">
<h3>Cached Synchronous RESTFul API<a class="headerlink" href="#cached-synchronous-restful-api" title="Permalink to this headline">¶</a></h3>
<p>Synchronous APIs are for requests which are directly resolved by Homard Server. Thereby, we get the last values cached on the server directly, without any delay. At this way, Homard can be seen as a data broker.</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="37%" />
<col width="9%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTP METHOD</th>
<th class="head">Path</th>
<th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GET</td>
<td>/api/rest /cached /{endpoint_id}/{resource}</td>
<td>None</td>
<td>Read the resource cached value</td>
</tr>
</tbody>
</table>
<p>The API is very useful in special for applications that can not setup a HTTP server in its architecture. This synchronous API can be outdated, to solve it, the user can enable a simple observer, which constantly updates the resource. In order to create an internal observer to maintain the value updated for a specific resource is as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="34%" />
<col width="8%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTP METHOD</th>
<th class="head">Path</th>
<th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>POST</td>
<td>/api/rest /{endpoint_id}/{resource}/observe</td>
<td>None</td>
<td>Observes the selected resource and updates the internal cache</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="asynchronous-restful-api">
<h3>Asynchronous RESTFul API<a class="headerlink" href="#asynchronous-restful-api" title="Permalink to this headline">¶</a></h3>
<p>This subsection present the asynchronous API and an execution example. The available asynchronous API resources are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="26%" />
<col width="27%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTP METHOD</th>
<th class="head">Path</th>
<th class="head">Parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">GET</td>
<td rowspan="2">/api/rest/{endpoint_id}/{resource}</td>
<td><strong>cburl:</strong> Destination callback url</td>
<td rowspan="2">Read the value and returns it to the destination callback url</td>
</tr>
<tr class="row-odd"><td><strong>proto:</strong> Destination callback url protocol</td>
</tr>
<tr class="row-even"><td rowspan="2">PUT</td>
<td rowspan="2">/api/rest/{endpoint_id}/{resource}</td>
<td><strong>cburl:</strong> Destination callback url</td>
<td rowspan="2">Write the value on resource and returns the status to callback url</td>
</tr>
<tr class="row-odd"><td><strong>proto:</strong> Destination callback url protocol</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="historical-data-restful-api">
<h3>Historical Data RESTFul API<a class="headerlink" href="#historical-data-restful-api" title="Permalink to this headline">¶</a></h3>
<p>Homard offers in top of the OMA LwM2M server a RESTFul services such as mechanism to communicate with the OMA LwM2M server. This HTTP/HTTPS RESTFul API allow users to query the stored information such as temperature and humidity. In addition, sensor status and maintenance parameters can be queried in order to know if there are any problem with network connectivity.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="3%" />
<col width="22%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTP PATH</th>
<th class="head">Method</th>
<th class="head">Description</th>
<th class="head">Result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/api/hist</td>
<td>GET</td>
<td>Returns historic of OMA clients connected to HOMARD.</td>
<td>[ { “name”: “HOPf4b85eab98de”, “cn”: “HopCore2” }, { “name”: “HOPf4b85eab98d6”, “cn”: “HopCore9” } ]</td>
</tr>
<tr class="row-odd"><td>/api/hist/{endpoint_id}[?from={timestamp}}[&amp;to={timestamp}][&amp;limit={max_records}][&amp;page={limited_page_requested}]</td>
<td>GET</td>
<td>Returns all historic values of {enpoint_id} device.</td>
<td>[ { “eid”: “HOPf4b85eab98de”, “temperature”: 27.36767578125, “humidity”: 45.654815673828125, “date”: “Jun 21, 2016 2:10:36 PM” }, … ]</td>
</tr>
<tr class="row-even"><td>/api/hist/{endpoint_id}/temp[?from={timestamp}][&amp;to={timestamp}][&amp;limit={max_records}][&amp;page={limited_page_requested}]</td>
<td>GET</td>
<td>Returns temperature historic values of {enpoint_id} device.</td>
<td>{ values: [ 27.36767578125, 27.96767578125, … ], dates:[ “Jun 21, 2016 2:10:36 PM”, “Jun 21, 2016 2:10:37 PM”, “Jun 21, 2016 2:10:48 PM”, …. ] }</td>
</tr>
<tr class="row-odd"><td>/api/hist/{endpoint_id}/hum[?from={timestamp}][&amp;to={timestamp}][&amp;limit={max_records}][&amp;page={limited_page_requested}]</td>
<td>GET</td>
<td>Returns humidity historic values of {enpoint_id} device.</td>
<td>{ values: [ 27.36767578125, 27.96767578125, … ], dates:[ “Jun 21, 2016 2:10:36 PM”, “Jun 21, 2016 2:10:37 PM”, “Jun 21, 2016 2:10:48 PM”, …. ] }</td>
</tr>
<tr class="row-even"><td>/api/hist/events/{endpoint_id}/[?from={timestamp}][&amp;to={timestamp}][&amp;limit={max_records}][&amp;page={limited_page_requested}]</td>
<td>GET</td>
<td>Returns device events such as when {enpoint_id} was registered, updated or deregistered.</td>
<td>[ { “name”: “HOPf4b85eab98de”, “event”: “REGISTRATION”, “ts”: “Jun 21, 2016 2:08:09 PM” }, { “name”: “HOPf4b85eab98de”, “event”: “UPDATED”, “ts”: “Jun 21, 2016 2:08:56 PM” }, … ]</td>
</tr>
<tr class="row-odd"><td>/api/hist/events/recount/{endpoint_id}/[?from={timestamp}][&amp;to={timestamp}]</td>
<td>GET</td>
<td>Returns a count of {enpoint_id} events.</td>
<td>[ { “count”: 2, “event”: “DEREGISTRATION” }, { “count”: 4, “event”: “REGISTRATION” }, { “count”: 841, “event”: “UPDATED” } ]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="homard-restful-api-examples">
<h2>Homard RESTFul API Examples<a class="headerlink" href="#homard-restful-api-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="synchronous-restful-api-examples">
<h3>Synchronous RESTFul API Examples<a class="headerlink" href="#synchronous-restful-api-examples" title="Permalink to this headline">¶</a></h3>
<p><strong>List connected clients: GET /api/rest/</strong></p>
<p>Query:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">GET</span> <span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">rest</span>
</pre></div>
</div>
<p>Result:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>[
    {
        “endpoint”:”HOP-Sensor-Debug”,
        “registrationId”:”MTKt5ejSeu”,
        “registrationDate”:”2015-02-16T01:06:27+01:00”,
        “address”:”/127.0.0.1:54604”,
        “lwM2MmVersion”:”1.0”,
        “lifetime”:120,
        “bindingMode”:”UQ”,
        “rootPath”:”/”,
        “objectLinks”:[
            {
                “url”:”/1/0”,
                “attributes”:{
                },
                “objectId”:1,
                “objectInstanceId”:0
            },
            {
                “url”:”/3”,
                “attributes”:{
                },
                “objectId”:3
            },
            {
                “url”:”/4”,
                “attributes”:{
                },
                “objectId”:4
            },
            {
                “url”:”/5”,
                “attributes”:{
                },
                “objectId”:5
            },
            {
                “url”:”/3201/0”,
                “attributes”:{
                },
                “objectId”:3201,
                “objectInstanceId”:0
            },
            {
                “url”:”/3201/1”,
                “attributes”:{
                },
                “objectId”:3201,
                “objectInstanceId”:1
            }
        ]
    }
]
</pre></div>
</div>
<p><strong>Get specific client: GET /api/rest/{endpoint_id}</strong></p>
<p>Query:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">GET</span> <span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">rest</span><span class="o">/</span><span class="nx">HOP</span><span class="o">-</span><span class="nx">Sensor</span><span class="o">-</span><span class="nx">Debug</span>
</pre></div>
</div>
<p>Result:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “endpoint”:”HOP-Sensor-Debug”,
    “registrationId”:”MTKt5ejSeu”,
    “registrationDate”:”2015-02-16T01:06:27+01:00”,
    “address”:”/127.0.0.1:54604”,
    “lwM2MmVersion”:”1.0”,
    “lifetime”:120,
    “bindingMode”:”UQ”,
    “rootPath”:”/”,
    “objectLinks”:[
        {
            “url”:”/1/0”,
            “attributes”:{
            },
            “objectId”:1,
            “objectInstanceId”:0
        },
        {
            “url”:”/3”,
            “attributes”:{
            },
            “objectId”:3
        },
        {
            “url”:”/4”,
            “attributes”:{
            },
            “objectId”:4
        },
        {
            “url”:”/5”,
            “attributes”:{
            },
            “objectId”:5
        },
        {
            “url”:”/3201/0”,
            “attributes”:{
            },
            “objectId”:3201,
            “objectInstanceId”:0
        },
        {
            “url”:”/3201/1”,
            “attributes”:{
            },
            “objectId”:3201,
            “objectInstanceId”:1
        }
    ]
}
</pre></div>
</div>
<p><strong>Get client observes: GET /api/rest/{endpoint_id}/co</strong></p>
<p>Query:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">GET</span> <span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">rest</span><span class="o">/</span><span class="nx">UBI8086f2759cbb</span><span class="o">/</span><span class="nx">observes</span>
</pre></div>
</div>
<p>Result:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>[
    {
        “client”: “HOPf4b85eab962b”,
        “path”:
            {
                “objectId”: 3303,
                “objectInstanceId”: 0,
                “resourceId”: 5700
            },
        “ocos”:
            [
                {
                    “url”: “homard.hopu.eu:8090/co”,
                    “protocol”: “https://”,
                    “threshold”: 0,
                    “condition”: “&gt;=”,
                    “method”: “POST”,
                    “oneShot”: false,
                    “outputFormat”:
                        [
                            {
                                “field”: “sensor”,
                                “value”: “$eID”
                            },
                            {
                                “field”: “value”,
                                “value”: “$value”
                            },
                            {
                                “field”: “r”,
                                “value”: “$resource”
                            },
                            {
                                “field”: “threshold”,
                                “value”: “$threshold”
                            }
                        ],
                    “id”: 1,
                    “type”: 0,
                    “endpoint”: “HOPf4b85eab962b”,
                    “path”: “/3303/0/5700”
                }
            ]
        }
    }
]
</pre></div>
</div>
<p><strong>Remove client observe: DELETE /api/rest/{endpoint_id}/{resource_path}/observe</strong></p>
<p>Query:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">DELETE</span> <span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">rest</span><span class="o">/</span><span class="nx">HOPf4b85eab9b03</span><span class="o">/</span><span class="mi">3303</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5700</span><span class="o">/</span><span class="nx">observe</span>
</pre></div>
</div>
<p>Result:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">HTTP</span> <span class="nx">Response</span> <span class="mi">200</span> <span class="nx">OK</span>
</pre></div>
</div>
</div>
<div class="section" id="asynchronous-restful-api-examples">
<h3>Asynchronous RESTFul API Examples<a class="headerlink" href="#asynchronous-restful-api-examples" title="Permalink to this headline">¶</a></h3>
<p><strong>Read device resource: GET /api/rest/{endpoint_id}/{resource}</strong></p>
<p>GET parameters:</p>
<ul class="simple">
<li><strong>proto</strong> (mandatory): Determines the protocol to use (HTTP or HTTPS).</li>
<li><strong>cburl</strong> (mandatory): Determines the response destination url.</li>
<li><strong>cbauthusr</strong> (optional): Used if the destination server requires Basic authentication.</li>
<li><strong>cbauthpass</strong> (optional): Used if the destination server requires Basic authentication.</li>
</ul>
<p>Read Device Resource Query:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">GET</span> <span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">rest</span><span class="o">/</span><span class="nx">HOPf4b85eab9b03</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5</span><span class="o">?</span><span class="nx">proto</span><span class="o">=</span><span class="nx">https</span><span class="o">&amp;</span><span class="nx">cburl</span><span class="o">=</span><span class="nx">homard</span><span class="p">.</span><span class="nx">hopu</span><span class="p">.</span><span class="nx">eu</span><span class="o">:</span><span class="mi">8090</span><span class="o">/</span><span class="nx">co</span>
</pre></div>
</div>
<p>Post Result on Callback Url:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “eid”:”HOPf4b85eab98de”,
    ”url”:”/1/0/5”,
    ”oID”:1,
    ”iID”:0,
    ”rID”:5,
    ”type”:”INTEGER”,
    ”value”:1
}
</pre></div>
</div>
<p>Post Error on Callback Url:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “eid”:”HOPf4b85eab98de”,
    “operation”:”read”,
    “resource”:”/1/0/5”,
    “status”:”ERROR”
}
</pre></div>
</div>
<p><strong>Write device resource: PUT /api/rest/{endpoint_id}/{resource}</strong></p>
<p>PUT parameters: proto (mandatory), cburl (mandatory), cbauthusr (optative), cbauthpass (optative).</p>
<p>Write Device Resource Query:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">PUT</span> <span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">rest</span><span class="o">/</span><span class="nx">HOPf4b85eab9b03</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5</span><span class="o">?</span><span class="nx">proto</span><span class="o">=</span><span class="nx">https</span><span class="o">&amp;</span><span class="nx">cburl</span><span class="o">=</span><span class="nx">homard</span><span class="p">.</span><span class="nx">hopu</span><span class="p">.</span><span class="nx">eu</span><span class="o">:</span><span class="mi">8090</span><span class="o">/</span><span class="nx">co</span>
</pre></div>
</div>
<p>Required Payload (Data to write):</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “id”: 5,
    “value”: 2
}
</pre></div>
</div>
<p>Post Result on Callback Url:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “eid”:”HOPf4b85eab98de”,
    ”url”:”/1/0/5”,
    ”oID”:1,
    ”iID”:0,
    ”rID”:5,
    ”type”:”INTEGER”,
    ”value”:1
}
</pre></div>
</div>
<p>Post Error on Callback Url:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “eid”:”HOPf4b85eab98de”,
    “operation”:”write”,
    “resource”:”/1/0/5”,
    “status”:”ERROR”
}
</pre></div>
</div>
</div>
<div class="section" id="asynchronous-api-observes">
<h3>Asynchronous API: Observes<a class="headerlink" href="#asynchronous-api-observes" title="Permalink to this headline">¶</a></h3>
<p>Observation creation requires a specific POST payload. This is a JSON object that contains the necessary parameters. The necessary data to create an observer is as follows:</p>
<ul class="simple">
<li>Observe resource: POST /api/rest/{endpoint_id/{resource}/co</li>
<li><dl class="first docutils">
<dt>Payload:</dt>
<dd><ul class="first last">
<li><strong>threshold:</strong> Threshold value</li>
<li><strong>op:</strong> Operation condition (&lt;=, &gt;=, …)</li>
<li><strong>typeShot:</strong> Type shot could be “repeat” or “oneshot”</li>
<li><strong>method:</strong> The method of the request, usually POST</li>
<li><strong>durl:</strong> Destination URL where the observer will send the notifications</li>
<li><strong>proto:</strong> Protocol to use (“<a class="reference external" href="https://">https://</a>” or “<a class="reference external" href="http://">http://</a>”)</li>
<li><strong>authUsr:</strong> Destination URL Basic authentication user (Optional)</li>
<li><strong>authPass:</strong> Destination URL Basic authentication password (Optional)</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Also the JSON schema for this object is:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “$schema”: “http://json-schema.org/draft-04/schema#”,
    “id”: “http://jsonschema.net”,
    “type”: “object”,
    “properties”: {
        “threshold”: {
            “id”: “http://jsonschema.net/threshold”,
            “type”: “string”
        },
        “op”: {
            “id”: “http://jsonschema.net/op”,
            “type”: “string”
        },
        “typeShot”: {
            “id”: “http://jsonschema.net/typeShot”,
            “type”: “string”
        },
        “method”: {
            “id”: “http://jsonschema.net/method”,
            “type”: “string”
        },
        “durl”: {
            “id”: “http://jsonschema.net/durl”,
            “type”: “string”
        },
        “proto”: {
            “id”: “http://jsonschema.net/proto”,
            “type”: “string”
        },
        “authUsr”: {
            “id”: “http://jsonschema.net/authUsr”,
            “type”: “string”
        },
        “authPass”: {
            “id”: “http://jsonschema.net/authPass”,
            “type”: “string”
        }
    },
    “required”: [
        “threshold”,
        “op”,
        “typeShot”,
        “method”,
        “durl”,
        “proto”
    ]
}
</pre></div>
</div>
<p><strong>Example of request</strong></p>
<p>Create observation:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">POST</span> <span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">rest</span><span class="o">/</span><span class="nx">HOPf4b85eab9b3a</span><span class="o">/</span><span class="mi">3303</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5700</span><span class="o">/</span><span class="nx">co</span>
</pre></div>
</div>
<p>Required Payload:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “threshold”: “0”,
    “op”: “&gt;=”,
    “typeShot”:”repeat”,
    “method”: “POST”,
    “durl”:”homard.hopu.eu:8090/co”,
    “proto”:”https://”,
    “authUsr”: “”,
    “authPass”: “”
}
</pre></div>
</div>
<p>Response Received:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">HTTP</span> <span class="nx">response</span> <span class="mi">200</span>
</pre></div>
</div>
<p>Notification Received on Callback Url:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “eid”:”HOPf4b85eab9b3a”,
    ”url”:”3303/0/5700”,
    ”oID”:3303,
    ”iID”:0,
    ”rID”:5700,
    ”value”:”17.028683”
}
</pre></div>
</div>
<p>Error Notification Received on Callback Url:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “eid”:”HOPf4b85eab9b3a”,
    “operation”:”observe”,
    “resource”:”/1/0/5”,
    “status”:”ERROR”
}
</pre></div>
</div>
</div>
<div class="section" id="asynchronous-api-customizing-observer-notification-message-integrating-with-third-party-platform-that-requires-a-specific-format">
<h3>Asynchronous API: Customizing observer notification message (integrating with third party platform that requires a specific format)<a class="headerlink" href="#asynchronous-api-customizing-observer-notification-message-integrating-with-third-party-platform-that-requires-a-specific-format" title="Permalink to this headline">¶</a></h3>
<p>Observation notifications have a standard output that can be formatted according to user needs. To achieve this we must add a JSON array called “outputPacket” that contains the format of the notification packet.</p>
<p>This array contains field/value JSON objects This array contains one or more objects of type field/value ({“field”:”NameFile”, “value”:”Variable or Constant”}). The field “field” contains the attribute name of the notification final object. The field “value” represents the value of that attribute, It can be constant or variable. The allowed variable are the following:</p>
<ul class="simple">
<li><strong>$eID:</strong> The Endpoint ID of the observed device.</li>
<li><strong>$resource:</strong> The OMA LwM2M resource observed.</li>
<li><strong>$value:</strong> The observation value received.</li>
<li><strong>$threshold:</strong> The observation threshold.</li>
<li><a href="#id1"><span class="problematic" id="id2">**</span></a>$condition:* The observation condition.</li>
</ul>
<p>For example if we want to receive the following notification:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “sensor”: “HOPf4b85eab9b3a”,
    “value”:15.32,
    “uuid”: “067e6162-3b6f-4ae2-a171-2470b63dff00”
}
</pre></div>
</div>
<p>We have to set the following “outputPacket”:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    ...,
    “outputPacket”:[
        {
            “field”:”name”,
            “value”:”$eID”
        },
        {
            “field”: “value”,
            “value”:”$value”
        },
        {
            “field”: “uuid”,
            “value”:”067e6162-3b6f-4ae2-a171-2470b63dff00”
        }
    ]
}
</pre></div>
</div>
<p>The JSON schema of the complete object is:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “$schema”: “http://json-schema.org/draft-04/schema#”,
    “id”: “http://jsonschema.net”,
    “type”: “object”,
    “properties”: {
        “threshold”: {
            “id”: “http://jsonschema.net/threshold”,
            “type”: “string”
        },
        “op”: {
            “id”: “http://jsonschema.net/op”,
            “type”: “string”
        },
        “typeShot”: {
            “id”: “http://jsonschema.net/typeShot”,
            “type”: “string”
        },
        “method”: {
            “id”: “http://jsonschema.net/method”,
            “type”: “string”
        },
        “durl”: {
            “id”: “http://jsonschema.net/durl”,
            “type”: “string”
        },
        “proto”: {
            “id”: “http://jsonschema.net/proto”,
            “type”: “string”
        },
        “authUsr”: {
            “id”: “http://jsonschema.net/authUsr”,
            “type”: “string”
        },
        “authPass”: {
            “id”: “http://jsonschema.net/authPass”,
            “type”: “string”
        },
        “outputPacket”: {
            “id”: “http://jsonschema.net/outputPacket”,
            “type”: “array”,
            “items”: [
                {
                    “id”: “http://jsonschema.net/outputPacket/0”,
                    “type”: “object”,
                    “properties”: {
                        “field”: {
                            “id”: “http://jsonschema.net/outputPacket/0/field”,
                            “type”: “string”
                        },
                        “value”: {
                            “id”: “http://jsonschema.net/outputPacket/0/value”,
                            “type”: “string”
                        }
                    }
                },
                {
                    “id”: “http://jsonschema.net/outputPacket/1”,
                    “type”: “object”,
                    “properties”: {
                        “field”: {
                            “id”: “http://jsonschema.net/outputPacket/1/field”,
                            “type”: “string”
                        },
                        “value”: {
                            “id”: “http://jsonschema.net/outputPacket/1/value”,
                            “type”: “string”
                        }
                    }
                }
            ]
        }
    },
    “required”: [
        “threshold”,
        “op”,
        “typeShot”,
        “method”,
        “durl”,
        “proto”
    ]
}
</pre></div>
</div>
<p><strong>Example of request</strong></p>
<p>Create Observation:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">POST</span> <span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">rest</span><span class="o">/</span><span class="nx">HOPf4b85eab9b3a</span><span class="o">/</span><span class="mi">3303</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">5700</span><span class="o">/</span><span class="nx">observe</span>
</pre></div>
</div>
<p>Required Payload:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “threshold”: “0”,
    “op”: “&gt;=”,
    “typeShot”:”repeat”,
    “method”: “POST”,
    “durl”:”homard.hopu.eu:8090/co”,
    “proto”:”https://”,
    “authUsr”: “”,
    “authPass”: “”,
    “outputPacket”:[
        {
            “field”:”name”,
            “value”:”$eID”
        },
        {
            “field”: “value”,
            “value”:”$value”
        }
    ]
}
</pre></div>
</div>
<p>Response Received:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">HTTP</span> <span class="nx">response</span> <span class="mi">200</span>
</pre></div>
</div>
<p>Notification Received on Callback Url:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name”:”HOPf4b85eab9b03”,
    ”value”:17.028683
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="url-manager-physical-web-configuration-for-advertising-urls">
<h2>URL Manager (Physical Web configuration for advertising URLs)<a class="headerlink" href="#url-manager-physical-web-configuration-for-advertising-urls" title="Permalink to this headline">¶</a></h2>
<p>Device URL Manager is the key component of the Industrial Physical Web solution offered to provide accessible and intuitive user interfaces. In details, the Device URL manager is used to administer the URL broadcasted / transmitted by the devices; this URL can be issued by BLE or Wi-Fi direct and must be coded with the Eddystone URL protocol1 from Google.</p>
<p>Nowadays, there is more than 3 million Apps hosted on Google Play, most of them are used a few times for their temporal or location context and later they are forgotten wasting resources on mobile devices or at best cases uninstalled. Google wants to solve this problem through Physical Web, this technology will allows service providers to interact with users depending on the location, temporality context or directly with the objects surrounding the user without the need of install any application on any device, These applications will be developed as progressive webs and they will allow user to feel that they are interacting with the real world through native applications, these applications are capable of interacting directly with mobile device hardware or even receiving notifications.</p>
<p>HOP Ubiquitous is a partner from Google for physical Web, and a service for the creation of secure and validated URLs is available in HPOI.info. Contact HOP Ubiquitous team for more details.</p>
<p>Physical Web creates a communication channel that connects the physical and virtual worlds using the Bluetooth Low Energy connection to send “push” notifications to nearby Smartphones that are in their range of action. This connection does not need any tracker native app, only with Google Chrome installed and with bluetooth switched on every user can interact with digital content directly in this physical point.</p>
<p>Thanks to technologies such as physical web and the Device URL Manager, Smart Spot is able to broadcast a URL with temporal and spatial context that will send to people around the Smart Spot for use cases such as tourism, infortainment, accesibility, marketing, make visible content or Webs available linked to a Physical place, etc</p>
<p>Device URL Manager provides an Open Source Core2 for users to be able to develop their own solutions which is accessible through an API REST, which is developed in python using Open Source frameworks such as Django and Django REST Framework that provides to the developers an ecosystem that allows an easy extension of the system for introducing layers of security or registration of devices.</p>
<p>URL Manager: <a class="reference external" href="https://github.com/HOP-Ubiquitous/DeviceUrlManager">https://github.com/HOP-Ubiquitous/DeviceUrlManager</a></p>
<a class="reference internal image-reference" href="_images/url-manager.png"><img alt="URL Manager Diagram" class="align-center" src="_images/url-manager.png" style="width: 260px; height: 281px;" /></a>
<div class="section" id="url-manager-restful-api">
<h3>URL Manager RESTFul API<a class="headerlink" href="#url-manager-restful-api" title="Permalink to this headline">¶</a></h3>
<p>This tool is used for manage the physical web URL of any device by software.</p>
<p>Smart PhoneS detect the Eddystone URL advertisement with a fixed device url that point to the Device URL Manager, then the Device URL Manager will redirect the request to the real uRL.</p>
<p>More information in the repository: <a class="reference external" href="https://github.com/HOP-Ubiquitous/DeviceUrlManager">https://github.com/HOP-Ubiquitous/DeviceUrlManager</a></p>
</div>
<div class="section" id="url-manager-restful-api-examples">
<h3>URL Manager RESTFul API Examples<a class="headerlink" href="#url-manager-restful-api-examples" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>Fixed device url</strong> (Request): <a class="reference external" href="https://hpoi.info/AA00BB11DD22">https://hpoi.info/AA00BB11DD22</a></li>
<li><strong>Device URL Manager external device URL</strong> (Response): <a class="reference external" href="https://google.es">https://google.es</a></li>
<li><strong>MAC address</strong>: is a normal MAC without the two dots. E.g: 00:11:22:33:44:55 &gt; shortened MAC: 001122334455</li>
</ul>
<p><strong>Create Device</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="8%" />
<col width="11%" />
<col width="31%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Data Params</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/api/v1/devices</td>
<td>POST</td>
<td>None</td>
<td><strong>Type</strong>: application/json</td>
<td>Method to add a device with its MAC and a target URL</td>
</tr>
</tbody>
</table>
<p>Success Response:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Code</span><span class="o">:</span> <span class="mi">201</span> <span class="p">(</span><span class="nx">Created</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Content:
{
    “mac”:”001122334455”,
    ”external_url”:“https://google.es/”
}
</pre></div>
</div>
<p>Error Response:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Code</span><span class="o">:</span> <span class="mi">400</span> <span class="p">(</span><span class="nx">Bad</span> <span class="nx">Request</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Content:
{
    “bad_field_name”:[error causes]
}
</pre></div>
</div>
<p>Sample Call:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    url: “/api/v1/devices”,
    dataType: “json”,
    data: {
        “mac”: “001122334455”,
        “external_url”: “https://google.es/”
    },
    type : “POST”,
    success : function(r) {
        console.log(r);
    }
}
</pre></div>
</div>
<p><strong>Show Device Data</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="8%" />
<col width="17%" />
<col width="14%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Data Params</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/api/v1/devices/:shortened_mac</td>
<td>GET</td>
<td>shortened_mac=[String]</td>
<td>None</td>
<td>Method to show the device information</td>
</tr>
</tbody>
</table>
<p>Success Response:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Code</span><span class="o">:</span> <span class="mi">200</span> <span class="p">(</span><span class="nx">Ok</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Content:
{
    “mac”: “001122334455”,
    “external_url”: “https://google.es/”
}
</pre></div>
</div>
<p>Error Response:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Code</span><span class="o">:</span> <span class="mi">404</span> <span class="p">(</span><span class="nx">Not</span> <span class="nx">Found</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Content:
{
    “detail”: “Device Not Found”,
}
</pre></div>
</div>
<p>Sample Call:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    url: “/api/v1/devices/001122334455”,
    dataType: “json”,
    type : “GET”,
    success : function(r) {
        console.log(r);
    }
}
</pre></div>
</div>
<p><strong>Update Device Data</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="6%" />
<col width="8%" />
<col width="33%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Data Params</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/api/v1/devices/:shortened_mac</td>
<td>PUT</td>
<td>None</td>
<td><strong>Type</strong>: application/json</td>
<td>Method to update the device information</td>
</tr>
</tbody>
</table>
<p>Success Response:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Code</span><span class="o">:</span> <span class="mi">200</span> <span class="p">(</span><span class="nx">Ok</span><span class="p">)</span>
</pre></div>
</div>
<p>Content:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “mac”: “001122334455”,
    “external_url”: “https://google.es/”
}
</pre></div>
</div>
<p>Error Response:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Code</span><span class="o">:</span> <span class="mi">404</span> <span class="p">(</span><span class="nx">Not</span> <span class="nx">Found</span><span class="p">)</span>
</pre></div>
</div>
<p>Content:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “detail”: “Device Not Found”,
}
</pre></div>
</div>
<p>Sample Call:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    url: “/api/v1/devices/001122334455”,
    dataType: “json”,
    data: {
        “external_url”: “https://google.es/”
    },
    type : “PUT”,
    success : function(r) {
        console.log(r);
    }
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="fiware-integration">
<h2>Fiware Integration<a class="headerlink" href="#fiware-integration" title="Permalink to this headline">¶</a></h2>
<p>FIWARE (www.fiware.org) in an open platform promoted by the European Commision and maintained by the FIWARE Foundation, where HOP Ubiquitous is Gold Member.</p>
<p>FIWARE offers an Open Ecosystem that join different technology enablers for scalable data mangement and make feasible to integrate different services and Internet of Things devices into a common and interoperable framework based on Open Standards. In particular, FIWARE is based on Open Standards such as OMA NGSI for the Services Interface and ETSI ISG CIM for the data models. HOP Ubiquitous is an active member and contributor in ETSI ISG CIM and also an active contributor in OMA; being one of pioneer and main companies working around OMA LwM2M protocol.</p>
<p>In details, FIWARE has a strong role in the Smart Cities market, since the is key to the growth and functionality of Smart Cities, for this reason we are committed to initiatives such as Open and Agile Smart Cities (OASC) association with over 100 cities enrolled and FIWARE technology as the basis for making it feasible.</p>
<p>Smart Spot is a FIWARE-ready device, it means that Smart Spot has been validated, passed a set of tests, participated in plugfests and the most important is supporting the APIs, FIWARE data models based on ETSI ISG CIM and it is fully interoperable and integrated with key components from FIWARE such as Orion Context Broker.</p>
<p>In details, Orion Context Broker is the core of FIWARE platform; since it enables the common integration of heterogenous data sources into a common component, which enables the capacity to carry out advanced queries, cross data among heterogenous domains (e.g., noise with crowd, weather and mobility, etc.), and finally it can exports data to several data analytics components such as Hadoop / COSMOS (Big Data), SHT (Time Series), CKAN (Open Data), MongoDB (Non-structured data), etc.</p>
<p>FIWARE and the solutions from HOP Ubiquitous are contributing to the creation of adapted and standardized solutions to satisfy the described process from the cocreation and citizens engagement to the deployment of solutions based on IoT to reach the digitalization and enhancement of different areas in the city.</p>
<p>Thanks to the LwM2M Bootstrap Server deployed and integrated in the Homard platform, it is really easy to setup the server configuration for a the device. In this way, anyone can deploy its own LwM2M IOTAgent with a public server IP and configure the device to integrate it in FIWARE.</p>
<p>A tutorial about Orion Context Broker has been developed by FIWARE and HOP Ubiquitous, which can be downloaded in: <a class="reference external" href="http://goo.gl/o1KXcT">http://goo.gl/o1KXcT</a></p>
<div class="section" id="oma-lwm2m-iot-agent">
<h3>OMA LwM2M IoT Agent<a class="headerlink" href="#oma-lwm2m-iot-agent" title="Permalink to this headline">¶</a></h3>
<p>OMA LwM2M is a device management protocol created by the Open Mobile alliance (OMA) which allows the remote manipulation of Internet of Things constrained devices. This complete protocol defines the procedures for provisioning, commissioning and management of a device through the definition of the resources exposed by the device.</p>
<p>The functionality of LwM2M protocol is carried out through a set of basic objects such as “Server”, “Security”, “Device”, “Statistics”… but there are also more specific objects defined by the IPSO Alliance which aims to cover the need common definitions for sensors such as temperature, humidity, presence, etc. Or actuators such as power/light/load control, buzzers, etc.</p>
<p>CoAP (Constrained Application Protocol) defines the message header, request/response codes, message options and retransmission mechanisms, this protocol together with UDP is used by LwM2M as a transport mechanism.</p>
<p>There are a large variety of topologies on the IoT but they have three common parts; devices, routers and backends.</p>
<p>In some scenarios, routers are transparent for the enddevices such as cellular technologies, examples are: GSM, SigFox, NarrowBand IoT or Wi-Fi Hallow, since they are already deployed by Telco’s. Others, such as Wi-Fi, Bluetooth, 6LoWPAN and Z-Wave are provided individually with the devices. In HOP Ubiquitous our technology is mainly based on GSM and Bluetooth 4.0.</p>
<p>The FIWARE Foundation counts with its own set of services for the IOT. One of this kind of services is called FIWARE IOT Agent, and we can find one that is fully compatible with our device architecture and connection protocols. HOP Ubiquitous in collaboration with ATOS and Telefonica are maintaining the integration of OMA LwM2M protocol with FIWARE via the Orion Context Broker. It is fully Open Source (URL al IoT Agent de HOPU en GitHub), and it counts with a simple deployment over FIWARE and Linux-based platforms.</p>
<p>In addition, HOP Ubiquitous offers containers and Cloudenabled services with the integration of FIWARE and Orion Context Broker (including OMA LwM2M IoT Agent). Contact HOP Ubiquitous support team for more details.</p>
</div>
<div class="section" id="orion-context-broker">
<h3>Orion Context Broker<a class="headerlink" href="#orion-context-broker" title="Permalink to this headline">¶</a></h3>
<p>In The architecture, a service for context and information storage, sharing and consumption is needed, in the FIWARE Architecture this is the Orion Context Broker. This service is the one in charge to connect with the OMA LwM2M IOT Agent in order to collect data coming from the IOT devices. One of the most important features of the Context Broker is that it allows to model and gain access to context information in a way that is independent from the source of that information. It uses a non-relational database (Mongodb) to store all the data, and counts with an easy to use REST API with makes data accessible.</p>
</div>
<div class="section" id="cygnus">
<h3>Cygnus<a class="headerlink" href="#cygnus" title="Permalink to this headline">¶</a></h3>
<p>This is the FIWARE Service in charge of persisting data. It is based on Apache Flume, Cygnus offers as a data bus the interconnection with several data sources and data platforms such as Hadoop, CKAN, STH Comet etc.</p>
</div>
<div class="section" id="fiware-architecture">
<h3>FIWARE architecture<a class="headerlink" href="#fiware-architecture" title="Permalink to this headline">¶</a></h3>
<p>Taking the previous two components into account the FIWARE IoT platform is composed, in the following lines the deployment of every service and the integration with the HOP Ubiquitous Smart Spot is described.</p>
<a class="reference internal image-reference" href="_images/fiware-architecture.png"><img alt="FIWARE Architecture Diagram" class="align-center" src="_images/fiware-architecture.png" style="width: 488px; height: 303px;" /></a>
<p><strong>Deployment and integration with FIWARE</strong></p>
<p>A previous setting up is needed before things can be switched on, taking into account the following steps. We will assume that the user has a basic knowledge about DOCKER and LINUX CMD.</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Get and configure the Hopu modifi ed FiWARE IOTAgent:</dt>
<dd><ol class="first last arabic">
<li>git clone <a class="reference external" href="https://github.com/HOP-Ubiquitous/lightweightm2m-iotagent/tree/hopu">https://github.com/HOP-Ubiquitous/lightweightm2m-iotagent/tree/hopu</a></li>
<li>change the fi le content for <strong>config.js</strong>, <strong>omaRegistry.json</strong> and <strong>omaInverseRegistry.json</strong> in order to set up our device confi guration to connect with.</li>
<li>execute: npm install</li>
<li>Launch a mongoDB instance for the IOTAgent with external <strong>port 7900</strong>.</li>
</ol>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Prepare The orion context broker infrastructure:</dt>
<dd><ol class="first last arabic">
<li>Launch a mongoDB instance for the IoTAgent with external <strong>port 1026</strong>.</li>
<li>Launch a ORION Context Broker instance.</li>
</ol>
</dd>
</dl>
</li>
</ul>
<p>Docker makes really simple the previous steps.</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Make sure that the Smart Spot knows where is the IoTAgent to connect with:</dt>
<dd><ol class="first last arabic">
<li>Notify The Smart Spot about the IOTAgent IP with the bootstrap procedure.</li>
</ol>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Rock &amp; Roll:</dt>
<dd><ol class="first last arabic">
<li>Change directory (cd) to the IOTAgent one and execute <strong>./bin/lwm2mAgent.js</strong>.</li>
<li>Turn on the Smart Spot</li>
</ol>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="orion-context-broker-ngsi-restful-api">
<h2>Orion Context Broker NGSI RESTFul API<a class="headerlink" href="#orion-context-broker-ngsi-restful-api" title="Permalink to this headline">¶</a></h2>
<p>Orion is a C++ implementation of the NGSIv2 REST API binding developed as a part of the FIWARE platform.</p>
<p>Orion Context Broker allows you to manage the entire lifecycle of context information including updates, queries, registrations and subscriptions. It is an NGSIv2 server implementation to manage context information and its availability. Using the Orion Context Broker, you are able to create context elements and manage them through updates and queries. In addition, you can subscribe to context information so when some condition occurs (e.g. the context elements have changed) you receive a notification. These usage scenarios and the Orion Context Broker features are described in this documentation.</p>
<div class="section" id="create-entity-v2">
<h3>Create entity v2<a class="headerlink" href="#create-entity-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="5%" />
<col width="37%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to put an entity in a service.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    id:”Entity ID”,
    type:”Entity type”,
    “attributeID0”: {
        value:”Attribute value”,
        type:”Attribute type”
    },
    “attributeID1”: {
        value:”Attribute value”,
        type:”Attribute type”
    },...
}
</pre></div>
</div>
<p>Example of Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    id:”Room7”,
    type:”Room”,
    “temperature”: {
        value: 23,
        type: ”Float”
    },
    “preassure”: {
        value: 720,
        type: ”Integer”
    },...
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Return</span> <span class="nx">an</span> <span class="nx">error</span> <span class="nx">message</span><span class="p">,</span> <span class="k">if</span> <span class="nx">already</span> <span class="nx">exists</span> <span class="nx">an</span> <span class="nx">entity</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">service</span> <span class="kd">with</span> <span class="nx">the</span> <span class="nx">same</span> <span class="nx">id</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entity-v2">
<h3>Retrieve entity v2<a class="headerlink" href="#retrieve-entity-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="4%" />
<col width="41%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities/{{fiware-entity}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to retrieve an entity of a service.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity which will be retrieved from the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">If</span> <span class="nx">the</span> <span class="nx">search</span> <span class="nx">has</span> <span class="nx">been</span> <span class="nx">successful</span> <span class="nx">then</span> <span class="nx">it</span> <span class="nx">returns</span> <span class="nx">the</span> <span class="nx">information</span> <span class="k">else</span> <span class="nx">it</span> <span class="nx">returns</span> <span class="nx">an</span> <span class="nx">message</span> <span class="nx">error</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entity-as-data-model-v2">
<h3>Retrieve entity as data model v2<a class="headerlink" href="#retrieve-entity-as-data-model-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="3%" />
<col width="38%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities/{{fiware-entity}}?options=keyValues</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to obtain an entity of a service.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity which will be retrieved from the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">If</span> <span class="nx">the</span> <span class="nx">search</span> <span class="nx">has</span> <span class="nx">been</span> <span class="nx">successful</span> <span class="nx">then</span> <span class="nx">it</span> <span class="nx">returns</span> <span class="nx">the</span> <span class="nx">information</span> <span class="k">of</span> <span class="nx">compressed</span> <span class="nx">way</span> <span class="k">else</span> <span class="nx">returns</span> <span class="nx">an</span> <span class="nx">error</span> <span class="nx">message</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entities-v2">
<h3>Retrieve entities v2<a class="headerlink" href="#retrieve-entities-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="5%" />
<col width="36%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities?limit=50</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve all entities.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">All</span> <span class="nx">entities</span> <span class="k">of</span> <span class="nx">the</span> <span class="nx">service</span> <span class="nx">and</span> <span class="k">for</span> <span class="nx">each</span> <span class="nx">entity</span> <span class="nx">shows</span> <span class="nx">their</span> <span class="nx">information</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entities-as-data-model-v2">
<h3>Retrieve entities as data model v2<a class="headerlink" href="#retrieve-entities-as-data-model-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="4%" />
<col width="30%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities?options=keyValues&amp;limit=50</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve all entities of a service.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">All</span> <span class="nx">entities</span> <span class="k">of</span> <span class="nx">the</span> <span class="nx">service</span> <span class="nx">and</span> <span class="k">for</span> <span class="nx">each</span> <span class="nx">entity</span> <span class="nx">shows</span> <span class="nx">their</span> <span class="nx">information</span> <span class="k">of</span> <span class="nx">compressed</span> <span class="nx">way</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="update-entity-v2">
<h3>Update entity v2<a class="headerlink" href="#update-entity-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="4%" />
<col width="39%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities/{{fiware-entity}}/attrs</td>
<td rowspan="3">PATCH</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to update some attributes of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity where their attributes will be updated.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “attributeID”:{
        value:”Attribute value”,
        type:”Attribute type”
    }
}
</pre></div>
</div>
<p>Example of Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “temperature”: {
        “value”: 26.5,
        “type”: “Float”
    },
    “pressure”: {
        “value”: 763,
        “type”: “Float”
    }
}
</pre></div>
</div>
</div>
<div class="section" id="delete-entity-v2">
<h3>Delete entity v2<a class="headerlink" href="#delete-entity-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="4%" />
<col width="36%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities/{{fiware-entity}}</td>
<td rowspan="3">DELETE</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete an entity of a service.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity which will be deleted.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-attribute-for-entity-v2">
<h3>Create attribute for entity v2<a class="headerlink" href="#create-attribute-for-entity-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="4%" />
<col width="36%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities/{{fiware-entity}}/attrs/</td>
<td rowspan="3">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to add a new attribute to the entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity which will have new attributes.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “attributeID”:{
        value:”Attribute value”,
        type:”Attribute type”
    }
}
</pre></div>
</div>
<p>Example of Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “temperature”: {
        “value”: 26.5,
        “type”: “Float”
    }
}
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entity-attribute-v2">
<h3>Retrieve entity attribute v2<a class="headerlink" href="#retrieve-entity-attribute-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="4%" />
<col width="31%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities/{{fiware-entity}}/attrs/{{fiware-attr}}</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="4">Method to retrieve an attribute of an entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity where is the attribute.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-attr</strong>: ID of the attribute.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">If</span> <span class="nx">the</span> <span class="nx">search</span> <span class="nx">has</span> <span class="nx">been</span> <span class="nx">successful</span> <span class="nx">then</span> <span class="nx">the</span> <span class="nx">attribute</span> <span class="nx">is</span> <span class="nx">retrieved</span> <span class="nx">and</span> <span class="nx">shows</span> <span class="nx">their</span> <span class="nx">information</span> <span class="k">else</span> <span class="nx">an</span> <span class="nx">error</span> <span class="nx">message</span> <span class="nx">is</span> <span class="nx">returned</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entity-attribute-as-data-model-v2">
<h3>Retrieve entity attribute as data model v2<a class="headerlink" href="#retrieve-entity-attribute-as-data-model-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="4%" />
<col width="31%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities/{{fiware-entity}}?options=keyValues</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="4">Method to retrieve an attribute of an entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity where is the attribute.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-attr</strong>: ID of the attribute.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">If</span> <span class="nx">the</span> <span class="nx">search</span> <span class="nx">has</span> <span class="nx">been</span> <span class="nx">successful</span> <span class="nx">then</span> <span class="nx">the</span> <span class="nx">attribute</span> <span class="nx">is</span> <span class="nx">retrieved</span> <span class="nx">and</span> <span class="nx">shows</span> <span class="nx">their</span> <span class="nx">information</span><span class="p">,</span> <span class="k">else</span> <span class="nx">it</span> <span class="nx">returns</span> <span class="nx">a</span> <span class="nx">message</span> <span class="nx">error</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-attribute-for-entity-v2">
<h3>Delete attribute for entity v2<a class="headerlink" href="#delete-attribute-for-entity-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="4%" />
<col width="33%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/entities/{{fiware-entity}}/attrs/{{fiware-attr}}</td>
<td rowspan="4">DELETE</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="4">Method to delete an attribute of an entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity which will delete attributes</td>
</tr>
<tr class="row-odd"><td><strong>fiware-attr</strong>: ID of the attribute which will delete</td>
</tr>
</tbody>
</table>
<p><strong>Retrieve type v2</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="4%" />
<col width="42%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/types/{{fiware-service}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to retrieve an entity type of the service.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-service</strong>: ID of type of the entity which will be searched in the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">If</span> <span class="nx">the</span> <span class="nx">search</span> <span class="nx">has</span> <span class="nx">been</span> <span class="nx">successful</span> <span class="nx">then</span> <span class="nx">type</span> <span class="nx">is</span> <span class="nx">retrieved</span> <span class="nx">and</span> <span class="nx">shows</span> <span class="nx">all</span> <span class="nx">their</span> <span class="nx">information</span><span class="p">,</span> <span class="k">else</span> <span class="nx">an</span> <span class="nx">error</span> <span class="nx">message</span> <span class="nx">is</span> <span class="nx">returned</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-types-v2">
<h3>Retrieve types v2<a class="headerlink" href="#retrieve-types-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="4%" />
<col width="32%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/types</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">The different entity types in the service and their information.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-subscription-v2">
<h3>Create subscription v2<a class="headerlink" href="#create-subscription-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="4%" />
<col width="32%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/subscriptions</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a subscription to one or many entities.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “description”: “Definition of the subscription”,
    “subject”: {
        “entinties”: [
            {
                “id”: “Room1”
                “type: “Room”
            }
        ],
        “condition”: {
            “attrs”: [
                “pressure”
            ]
        }
    },
    “notification”: {
        “http”: {
            “url”: “http://localhost:1028/accumulate”
        },
        “attrs”: [
            “temperature”
        ]
    },
    “expires”: “2040-01-01T14:00:00.00Z”,
    “throttling”: “5”
}
</pre></div>
</div>
<ul class="simple">
<li><strong>condition:</strong> It defines the “trigger” for the subscription.</li>
<li><strong>url:</strong> URL where to send notifications</li>
<li><strong>throttling:</strong> It is used to specify a minimum inter-notification arrival time.</li>
<li><strong>notification.attr:</strong> Attributes which you will received in a notification when “condition.attr” changes.</li>
</ul>
</div>
<div class="section" id="retrieve-subscriptions-v2">
<h3>Retrieve subscriptions v2<a class="headerlink" href="#retrieve-subscriptions-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="4%" />
<col width="33%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/subscriptions</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve all subscriptions of a service.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">All</span> <span class="nx">existing</span> <span class="nx">subscriptions</span> <span class="k">of</span> <span class="nx">the</span> <span class="nx">service</span> <span class="nx">and</span> <span class="k">for</span> <span class="nx">each</span> <span class="nx">subscription</span> <span class="nx">show</span> <span class="nx">their</span> <span class="nx">information</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-subscriptions-v2">
<h3>Remove subscriptions v2<a class="headerlink" href="#remove-subscriptions-v2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="4%" />
<col width="34%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v2/subscriptions/{{fiware-subscription}}</td>
<td rowspan="3">DELETE</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete a subscription of a service.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-subscription</strong>: ID of the subscription will be deleted.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-context-entity-v1">
<h3>Create context entity v1<a class="headerlink" href="#create-context-entity-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="4%" />
<col width="29%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/registry/registerContext</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a context of entity, an entity without values.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “contextRegistrations”: [
        {
            “entities”: [
                {
                    “type”: “entity_type”,
                    “isPattern”: “false”,
                    “id”: “entity_id”
                }
            ],
            “attributes”: [
                {
                    “name”: “nombre_atributo”,
                    “type”: “attribute_type”,
                    “isDomain”: “false”
                }
            ],
            “providingApplication”: “http://homard.hopu.
            eu:1026/v2/entities”
        }
    ],
    “duration”: “P1M”
}
</pre></div>
</div>
<ul class="simple">
<li><strong>isPattern:</strong> Nowadays, it is not being used. Threfore, value is always “false”.</li>
<li><strong>isDomain:</strong> The attribute domains aren’t supported. Always ‘false’.</li>
<li><strong>providingApplication:</strong> The URL that represents the context information of the registered entities and attributes.</li>
<li><strong>duration:</strong> The duration of the element. In ISO 8601 standard format.</li>
</ul>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Returns a confirmation that the item has been created correctly

{
    “duration”: “P1M”,
    “registrationId”: “5a79812d777fc523840b8446”
}
</pre></div>
</div>
</div>
<div class="section" id="retrieve-context-entity-v1">
<h3>Retrieve context entity v1<a class="headerlink" href="#retrieve-context-entity-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="3%" />
<col width="24%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/registry/discoverContextAvailability</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve a context of entity, an entity without values, depends on ID and type.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “entities”: [
        {
            “type”: “entity_type”,
            “isPattern”: “false”,
            “id”: “entity_id”
        }
    ]
}
</pre></div>
</div>
<ul class="simple">
<li><strong>isPattern:</strong> Nowadays, it is not being used. Threfore, value is always “false”.</li>
</ul>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of finding this element, it returns the information.

In case of not finding this element, it returns a 404 error “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="create-update-entity-v1">
<h3>Create/update entity v1<a class="headerlink" href="#create-update-entity-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="4%" />
<col width="31%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/updateContext</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to create or update an entity, depends on method’s body.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body (creation):</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “contextElements”: [
        {
            “type”: “entity_type”,
            “isPattern”: “false”,
            “id”: “entity_id “,
            “attributes”: [
                {
                    “name”:”attribute_id “,
                    “type”: “attribute_type”,
                    “value”: “attribute_value”
                }
            ]
        }
    ],
    “updateAction”: “APPEND”
}
</pre></div>
</div>
<p>Body (updating):</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “contextElements”: [
        {
            “type”: “entity_type”,
            “isPattern”: “false”,
            “id”: “entity_id “,
            “attributes”: [
                {
                    “name”:”attribute_id”,
                    “type”: “attribute_type”,
                    “value”: “attribute_value”
                }
            ]
        }
    ],
    “updateAction”: “UPDATE”
}
</pre></div>
</div>
<ul class="simple">
<li><strong>isPattern:</strong> Nowadays, it is not being used. Threfore, value is always “false”.</li>
<li><strong>updateAction:</strong> Action to be carried out (“APPEND” or “UPDATE”). In case of “APPEND” creates the entity, if else “UPDATE” updatdes the entity.</li>
</ul>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it return 200 OK together with the information of the entity.

In UPDATE, in case of not find that entity, it return a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="create-entity-v1">
<h3>Create entity v1<a class="headerlink" href="#create-entity-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="4%" />
<col width="41%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextEntities/{{fiware-entity}}</td>
<td rowspan="3">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to create a new entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity that will be create of the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “type”: “entity_type”,
    “attributes”: [
        {
            “name”: “attribute_id”,
            “type”: “attribute_type”,
            “value”: “attribute_value”
        }
    ]
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">In</span> <span class="k">case</span> <span class="k">of</span> <span class="nx">performing</span> <span class="nx">the</span> <span class="nx">method</span> <span class="nx">correctly</span><span class="p">,</span> <span class="nx">it</span> <span class="k">return</span> <span class="mi">200</span> <span class="nx">OK</span> <span class="nx">together</span> <span class="kd">with</span> <span class="nx">the</span> <span class="nx">information</span> <span class="k">of</span> <span class="nx">the</span> <span class="k">new</span> <span class="nx">entity</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entity-standard-v1">
<h3>Retrieve entity standard v1<a class="headerlink" href="#retrieve-entity-standard-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="3%" />
<col width="35%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextEntities/{{fiware-entity}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method that return a defined entity passed as parameter.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity that will be create of the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it return 200 OK together with the information of the entity.

In case of not find that entity, it return a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entity-as-object-standard-v1">
<h3>Retrieve entity as object standard v1<a class="headerlink" href="#retrieve-entity-as-object-standard-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="3%" />
<col width="31%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextEntities/{{fiware-entity}}?attributeFormat=object</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method that return a defined entity with object JSON format.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity that will be create of the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together with the information of the entity with object JSON format.

In case of not find that entity, it return a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entity-convenience-v1">
<h3>Retrieve entity convenience v1<a class="headerlink" href="#retrieve-entity-convenience-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="4%" />
<col width="30%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/queryContext</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method that returns a defined entity passed in the body of the method.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “entities”: [
        {
            “type”: “entity_type”,
            “isPattern”: “false”,
            “id”: “entity_id”
        }
    ]
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together with the information of the entity.

In UPDATE, in case of not finding that entity, it returns a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entities-as-object-convenience-v1">
<h3>Retrieve entities as object convenience v1<a class="headerlink" href="#retrieve-entities-as-object-convenience-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="3%" />
<col width="22%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{portorion}}/v1/queryContext?attributeFormat=object</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method that return a defined entity with object JSON format. The entity ID is passed in the body of method.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “entities”: [
        {
            “type”: “entity_type”,
            “isPattern”: “false”,
            “id”: “entity_id”
        }
    ]
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together with the information of the entity with object JSON format.

In UPDATE, in case of not finding that entity, it returns a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entities-v1">
<h3>Retrieve entities v1<a class="headerlink" href="#retrieve-entities-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="5%" />
<col width="37%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextEntities</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method that return all entities.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Show</span> <span class="nx">all</span> <span class="nx">existing</span> <span class="nx">entities</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entities-as-object-v1">
<h3>Retrieve entities as object v1<a class="headerlink" href="#retrieve-entities-as-object-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="4%" />
<col width="28%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextEntities?attributeFormat=object</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method that return all entities with object JSON format.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Show</span> <span class="nx">all</span> <span class="nx">existing</span> <span class="nx">entities</span> <span class="kd">with</span> <span class="nx">object</span> <span class="nx">JSON</span> <span class="nx">format</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entities-for-type-v1">
<h3>Retrieve entities for type v1<a class="headerlink" href="#retrieve-entities-for-type-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="4%" />
<col width="30%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/registry/contextEntityTypes/{{fiware-type}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method that returns all entities of a concrete type.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of entities that we want to receive.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together with the information of the all entities of this type.

In UPDATE, in case of not finding that entity, it returns a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entities-for-type-as-object-v1">
<h3>Retrieve entities for type as object v1<a class="headerlink" href="#retrieve-entities-for-type-as-object-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="3%" />
<col width="24%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/registry/contextEntityTypes/{{fiware-type}}?attributeFormat=object</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method that return all entities of a concrete type with object JSON format.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of entities that we want to receive.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together with the information of the all entities of this type with object JSON format.

In UPDATE, in case of not finding that entity, it returns a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="delete-entity-v1">
<h3>Delete entity v1<a class="headerlink" href="#delete-entity-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="4%" />
<col width="34%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextEntities/{{fiware-entity}}</td>
<td rowspan="3">DELETE</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete a defined entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity we want to delete.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly and delete the entity defined, it returns 200 OK.

In case of not finding that entity, it returns a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="create-update-entity-attribute-v1">
<h3>Create/update entity attribute v1<a class="headerlink" href="#create-update-entity-attribute-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="2%" />
<col width="23%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextEntities/{{fiware-entity}}/attributes</td>
<td rowspan="3">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to update the values of one or many attributes of an entity passed as parameter. In addition, this method can create new attributes for an entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity that will be created of the service.</td>
</tr>
</tbody>
</table>
<p>Body (creation):</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Create a new attribute. We transmit a new attribute in the body:

{
    “attributes”: [
        {
            “name”: “attribute_id”,
            “type”: “attribute_type”,
            “value”: “attribute_value”
        }
    ]
}
</pre></div>
</div>
<p>Body (updating):</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Update an attribute. We transmit an existing/available attribute with a new value.

{
    “attributes”: [
        {
            “name”: “attribute_id_new”,
            “type”: “attribute_type_new”,
            “value”: “attribute_value_new”
        }
    ]
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together with the information of the entity updating.

In case of not finding that entity, it returns a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entity-attribute-v1">
<h3>Retrieve entity attribute v1<a class="headerlink" href="#retrieve-entity-attribute-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="3%" />
<col width="29%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextEntities/{{fiware-entity}}/attributes/{{fiware-attr}}</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="4">Method that retrieves the defined attribute depending on the ID of a specific entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity that will be retrieved of the service.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-attr</strong>: Attribute ID we want to receive.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together the attribute value defining by its ID for a specific entity.

In case of not finding that entity or attribute, it returns 404 ERROR “No context element found”.

In UPDATE, in case of not finding that entity, it returns a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="delete-entity-attribute-as-object-v1">
<h3>Delete entity attribute as object v1<a class="headerlink" href="#delete-entity-attribute-as-object-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="2%" />
<col width="24%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextEntities/{{fiware-entity}}/attributes/{{fiware-attr}}?attributeFormat=object</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="4">Method that retrieves the defined attribute depending on the ID of a specific entity with object JSON format.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity that will be retrieved of the service.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-attr</strong>: Attribute ID we want to receive.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together the attribute value defined by its ID for a specific entity with object JSON format.

In case of not finding that entity or attribute, it returns 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entities-attribute-for-type-v1">
<h3>Retrieve entities attribute for type v1<a class="headerlink" href="#retrieve-entities-attribute-for-type-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="3%" />
<col width="28%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/registry/contextEntityTypes/{{fiware-type}}/attributes/{{fiware-attr}}</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="4">Method that returns the defined attribute of all entities of a specific type.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of entities that we want to receive.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-attr</strong>: Attribute of type of entities that we want to receive.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together with the information of defined attributes of all entities of this type.

In UPDATE, in case of not finding that entity, it returns a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-entities-attribute-for-type-as-object-v1">
<h3>Retrieve entities attribute for type as object v1<a class="headerlink" href="#retrieve-entities-attribute-for-type-as-object-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="2%" />
<col width="23%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/registry/contextEntityTypes/{{fiware-type}}/attributes/{{fiware-attr}}?attributeFormat=object</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="4">Method that returns the defined attribute of all entities of a specific type with object JSON format.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of entities that we want to receive.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-attr</strong>: Attribute of type of entities that we want to receive.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together with the information of defined attributes of all entities of this type with object JSON format.

In UPDATE, in case of not finding that entity, it returns a 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="delete-entity-attribute-v1">
<h3>Delete entity attribute v1<a class="headerlink" href="#delete-entity-attribute-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="3%" />
<col width="29%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextEntities/{{fiware-entity}}/attributes/{{fiware-attr}}</td>
<td rowspan="4">DELETE</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="4">Method to delete the defined attribute depending on the ID of a concrete entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-entity</strong>: ID of the entity that will be retrieve of the service.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-attr</strong>: Attribute ID we want to receive.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly and delete the entity defined, it returns 200 OK.

In case of not finding that entity or attribute, it returns 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-type-v1">
<h3>Retrieve type v1<a class="headerlink" href="#retrieve-type-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="4%" />
<col width="35%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextTypes/{{fiware-type}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to receive an entity type concrete.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of entities that we want to receive.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together the information of this entities type.

In case of not finding that entities type, it returns 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-types-v1">
<h3>Retrieve types v1<a class="headerlink" href="#retrieve-types-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="5%" />
<col width="34%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextTypes</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to receive the existing entities types.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, it returns 200 OK together the information of all entities type.

In case of not finding that entities type, it returns 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="create-context-subscription-standard-v1">
<h3>Create context subscription standard v1<a class="headerlink" href="#create-context-subscription-standard-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="4%" />
<col width="28%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/subscribeContextAvailability</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a subscription to one or many context entities.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “entities”: [
        {
            “type”: “id_entity_type”,
            “isPattern”: “false”,
            “id”: “.*”
        }
    ],
    “attributes”: [
        “id_attribute”
    ],
    “reference”: “http://cygnus:5050/notify”,
    “duration”: “P1M”
}
</pre></div>
</div>
<ul class="simple">
<li><strong>isPattern:</strong> Nowadays, it is not being used. Threfore, value is always “false”.</li>
<li><strong>id:</strong> To which entity it wants to subscribe. In this case, to all entities of those type.</li>
<li><strong>reference:</strong> URL of client that it want to subscribe.</li>
<li><strong>duration:</strong> The duration of the subscription. In ISO 8601 standard format.</li>
</ul>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscriptionId”: “subscription_id”,
    “duration”: “P1M”
}
</pre></div>
</div>
</div>
<div class="section" id="update-context-subscription-standard-v1">
<h3>Update context subscription standard v1<a class="headerlink" href="#update-context-subscription-standard-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="4%" />
<col width="28%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/updateContextAvailabilitySubscriptions</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to update a subscription of a context entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “entities”: [
        {
            “type”: “id_entity_type”,
            “isPattern”: “false”,
            “id”: “.*”
        }
    ],
    “duration”: “P1M”
    “subscriptionId”: “subscription_id”
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscribeResponse”: {
        “subscriptionId”: “id_subscription”,
        “id_parameter”: “value_parameter”
    }
}
</pre></div>
</div>
</div>
<div class="section" id="update-context-subscription-convenience-v1">
<h3>Update context subscription convenience v1<a class="headerlink" href="#update-context-subscription-convenience-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="3%" />
<col width="30%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/registry/contextAvailabilitySubscriptions/{{fiware-subscription}}</td>
<td rowspan="3">PUT</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to update a subscription of a context entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-subscription</strong>: ID of the subscription will be updated.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
     “entities”: [
         {
             “type”: “id_entity_type”,
             “isPattern”: “false”,
             “id”: “.*”
         }
     ],
     “duration”: “P1M”
     “subscriptionId”: “subscription_id”
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscribeResponse”: {
        “subscriptionId”: “id_subscription”,
        “id_parameter”: “value_parameter”
    }
}
</pre></div>
</div>
</div>
<div class="section" id="delete-context-subscription-standard-v1">
<h3>Delete context subscription standard v1<a class="headerlink" href="#delete-context-subscription-standard-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="4%" />
<col width="30%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/unsuscribeContextAvailability</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to delete a subscription of a context entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
     “subscriptionId”: “5a785788777fc523840b843e”
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly and delete the entity defined, it returns 200 OK together with the removed subscription ID.

In case of not finding that subscription, it returns 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="delete-context-subscription-convenience-v1">
<h3>Delete context subscription convenience v1<a class="headerlink" href="#delete-context-subscription-convenience-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="3%" />
<col width="27%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{portorion}}/v1/contextAvailabilitySubscriptions/{{fiware-subscription}}</td>
<td rowspan="3">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete a subscription of a context entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-subscription</strong>: ID of subscription to remove.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly and delete the entity defined, it returns 200 OK together with the removed subscription ID.

In case of not finding that subscription, it returns 404 ERROR “No context element found”.
</pre></div>
</div>
</div>
<div class="section" id="create-subscription-standard-v1">
<h3>Create subscription standard v1<a class="headerlink" href="#create-subscription-standard-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="4%" />
<col width="32%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/suscribeContext</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a subscription to one or many entities.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “entities”: [
        {
            “type”: “entity_type”,
            “isPattern”: “false”,
            “id”: “.*”
        }
    ],
    “attributes”: [
        “attribute_id”
    ],
    “reference”: “http://cygnus:5050/notify”,
    “duration”: “P1M”
    “notifyConditions”: [
        {
            “type”: “ONCHANGE”,
            “condValues”: [
                “attribute_id”
            ]
        }
    ],
    “throttling”: “PT5S”
}
</pre></div>
</div>
<ul class="simple">
<li><strong>isPattern:</strong> Currently is hasn’t use. Always ‘false’.</li>
<li><strong>id:</strong> To which entity it wants to subscribe. In this case, to all entities of those type.</li>
<li><strong>reference:</strong> URL of client that it want to subscribe.</li>
<li><strong>duration:</strong> The duration of the subscription. In ISO 8601 standard format.</li>
<li><strong>notifyConditions:</strong> Define the launcher to notify the subscriptions. In this case, when change a value ofattributes transmitted via the “condValues” of an entity ,then it will trigger a notification.</li>
<li><strong>throttling:</strong> Specify a minimum inter-notification arrival time. In this case, 5 seconds.</li>
</ul>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscribeResponse”: {
        “subscriptionId”: “id_subscription”,
        “duration”: “P1M”
    }
}
</pre></div>
</div>
</div>
<div class="section" id="create-subscription-convenience-v1">
<h3>Create subscription convenience v1<a class="headerlink" href="#create-subscription-convenience-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="4%" />
<col width="31%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextSubscriptions</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a subscription to one or many entities.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “entities”: [
        {
            “type”: “entity_type”,
            “isPattern”: “false”,
            “id”: “.*”
        }
    ],
    “attributes”: [
        “attribute_id”
    ],
    “reference”: “http://cygnus:5050/notify”,
    “duration”: “P1M”
    “notifyConditions”: [
        {
            “type”: “ONCHANGE”,
            “condValues”: [
                “attribute_id”
            ]
        }
    ],
    “throttling”: “PT5S”
}
</pre></div>
</div>
<ul class="simple">
<li><strong>isPattern:</strong> Currently is hasn’t use. Always ‘false’.</li>
<li><strong>id:</strong> To which entity it wants to subscribe. In this case, to all entities of those type.</li>
<li><strong>reference:</strong> URL of client that it want to subscribe.</li>
<li><strong>duration:</strong> The duration of the subscription. In ISO 8601 standard format.</li>
<li><strong>notifyConditions:</strong> Define the launcher to notify the subscriptions. In this case, when change a value ofattributes transmitted via the “condValues” of an entity ,then it will trigger a notification.</li>
<li><strong>throttling:</strong> Specify a minimum inter-notification arrival time. In this case, 5 seconds.</li>
</ul>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscribeResponse”: {
        “subscriptionId”: “id_subscription”,
        “duration”: “P1M”
    }
}
</pre></div>
</div>
</div>
<div class="section" id="update-subscription-standard-v1">
<h3>Update subscription standard v1<a class="headerlink" href="#update-subscription-standard-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="4%" />
<col width="32%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/updateContextSubscription</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="2">Method to update a subscription of an entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscriptionId”: “id_subscription”,
    “id_parameter”: “value_parameter”
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscribeResponse”: {
        “subscriptionId”: “id_subscription”,
        “id_parameter”: “value_parameter”
    }
}
</pre></div>
</div>
</div>
<div class="section" id="update-subscription-convenience-v1">
<h3>Update subscription convenience v1<a class="headerlink" href="#update-subscription-convenience-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="4%" />
<col width="30%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextSubscriptions/{{fiware-subscription}}</td>
<td rowspan="3">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to update a subscription of an entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-subscription</strong>: ID of subscription to update.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscriptionId”: “id_subscription”,
    “id_parameter”: “value_parameter”
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscribeResponse”: {
        “subscriptionId”: “id_subscription”,
        “id_parameter”: “value_parameter”
    }
}
</pre></div>
</div>
</div>
<div class="section" id="delete-subscription-v1">
<h3>Delete subscription v1<a class="headerlink" href="#delete-subscription-v1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="4%" />
<col width="29%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-orion}}/v1/contextSubscriptions/{{fiware-subscription}}</td>
<td rowspan="3">POST</td>
<td><strong>url</strong>:Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete the subscription to an entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-orion</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-subscription</strong>: ID of subscription to remove.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscribeResponse”: {
        “subscriptionId”: “id_subscription”,
        “id_parameter”: “value_parameter”
    }
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="annex-1-oma-lwm2m">
<h2>ANNEX 1: OMA LwM2M<a class="headerlink" href="#annex-1-oma-lwm2m" title="Permalink to this headline">¶</a></h2>
<p>OMA LightweightM2M is a device management protocol designed for sensor networks and the demands of a machine-to-machine (M2M) environment. With LwM2M,
OMA has responded to demand in the market for a common standard for managing lightweight and low power devices on a variety of networks necessary to
realize the potential of IoT. The LwM2M protocol, designed for remote management of M2M devices and related service enablement, features a modern architectural
design based on REST, defines an extensible resource and data model and builds on an efficient secure data transfer standard called the Constrained Application Protocol
(CoAP). LwM2M has been specified by a group of industry experts at the Open Mobile Alliance’s Device Management Working Group and is based on protocol and security
standards from the IETF.</p>
<p>More information about OMA LwM2M Protocol:
<a class="reference external" href="http://www.openmobilealliance.org/release/LightweightM2M/V1_0_1-20170704-A/OMA-TS-LightweightM2M-V1_0_1-20170704-A.pdf">http://www.openmobilealliance.org/release/LightweightM2M/V1_0_1-20170704-A/OMA-TS-LightweightM2M-V1_0_1-20170704-A.pdf</a></p>
<div class="section" id="resource-model">
<h3>Resource model<a class="headerlink" href="#resource-model" title="Permalink to this headline">¶</a></h3>
<p>The LwM2M Enabler defines a simple resource model where each piece of information made available by the LwM2M Client is a Resource. Resources are organized into Objects, and each Resource is given a unique identifier within that Object.</p>
<p>Each Objec is assigned a unique OMA LwM2M Object identifier allocated and maintained by the OMA Naming Authority (OMNA). Further Objects may be added by OMA  or other organizations to enable additional M2M Services.</p>
<p>As an Object only specifies a grouping of Resources, an Object must be firstly instantiated so that the LwM2M Client can use the Resources of such an Object and the associated functionalities.</p>
<p>When an Object is instantiated an Object Instance is created with a subset of the Resources defined in the Object specification; a LwM2M Server can then access that Object Instance and its set of instantiated Resources.</p>
<p>A Resource which is instantiated within an Object Instance is a Resource which can either:</p>
<ul class="simple">
<li>contain a value (if the Resource is Readable and/or Writeable)</li>
<li>or can be addressed by a LwM2M Server to trigger an action in the LwM2M Client (if the Resource is Executable)</li>
</ul>
<p>The Object specification defines the operations (Read, Write, Execute) which are individually supported by the Resources belonging to that Object; this specification also defines the Mandatory or Optional characteristics of such Resources.</p>
<p>Objects and Resources have the capability to have multiple instances. Multiple-Instances Resources can be instantiated by LwM2M Server operations in using JSON or TLV formats. The LwM2M Client also has the capability to instantiate Single or Multiple-Instances Resources.</p>
<p>The LwM2M Enabler defines an access control mechanism per Object Instance. Object Instances should have an associated Access Control Object Instance. An Access Control Object Instances contains Access Control Lists (ACLs) that define which operations on a given Object Instance are allowed for which LwM2M Server(s).</p>
</div>
<div class="section" id="objects">
<h3>Objects<a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h3>
<p>Each Object definition, which may be found in the LwM2M specification, features the following information:</p>
<ul class="simple">
<li><strong>Name:</strong> specifies the Object name.</li>
<li><strong>Object ID:</strong> specifies the Object ID.</li>
<li><strong>Instances:</strong> indicates whether this Object supports multiple Object Instances or not. If this field is “Multiple” then the number of Object Instance can be from 0 to many. If this field is “Single” then the number of Object Instance can be from 0 to 1.</li>
<li><strong>Mandatory:</strong> if this field is “Mandatory”, then the LwM2M Client MUST support this Object. If this field is “Optional”, then the LwM2M Client SHOULD support this Object.</li>
<li><strong>Object URN</strong></li>
<li><strong>Resource definitions</strong></li>
</ul>
</div>
<div class="section" id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<p>Attributes are metadata which can be attached to an Object, an Object Instance or a Resource. The value of an Attribute is LwM2M Server specific.</p>
<p>Regardless to the LwM2M entity a given Attribute is attached to, the value of such an Attribute can be set at various levels: Object, Object Instance, Resource levels.</p>
<ul>
<li><dl class="first docutils">
<dt><strong>&lt;PROPERTIES&gt;</strong> Class Attributes: The role of these Attributes is to provide metadata which may communicate helpful information to LwM2M Server for example easing data management. These include:</dt>
<dd><ul class="first last simple">
<li><strong>Dimension</strong> (dim): Number of Instantiations for a Multiple Resource.</li>
<li><strong>Object Version</strong> (ver): Provide the version of the associated Object.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><strong>&lt;NOTIFICATION&gt;</strong> Class Attributes: The role of these R-Attributes is to provide parameters to the “Notify” operation; any readable Resource can have such Rattributes. In the message sent by a LwM2M Client in response to an “Observe” operation, the current Resource value is reported; this event can be considered as the initial notification.</p>
<blockquote>
<div><p>Each time a Resource notification is sent, the “Minimum Period” and “Maximum Period” timers associated to this Resource are restarted.</p>
<p>The notification of a Resource value will be sent when the combination of a change value condition (“Greater Than”, “Less Than”, or “Step”) and the “Minimum Period” timing conditions are both fulfilled for that Resource.</p>
<p>This behaviour can be modified using the following available attributes:</p>
<ul class="simple">
<li><strong>Minimum Period</strong> (pmin): The Minimum Period Attribute indicates the minimum time in seconds the LwM2M Client must wait between two notifications.</li>
<li><strong>Maximum Period</strong> (pmax): The Maximum Period Attribute indicates the maximum time in seconds the LwM2M Client MAY wait between two notifications.</li>
<li><strong>Greater Than</strong> (gt) and Less Than (lt): This Attributes defines a threshold high value and low value. When these Attributes is present, the LwM2M Client must notify the Server each time the Observed Resource value crosses these thresholds with respect to pmin parameter and to pmax parameter.</li>
<li><strong>Step</strong> (st): This Attribute defines a minimum change value between two notifications. When this Attribute is present, the change value condition will occur when the value variation since the last notification of the Observed Resource, is greater or equal to the “Step” Attribute value.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="clients-and-servers">
<h3>Clients and servers<a class="headerlink" href="#clients-and-servers" title="Permalink to this headline">¶</a></h3>
<p>This enabler defines the application layer communication protocol between a LwM2M Server and a LwM2M Client, which is located in a LwM2M Device. The OMA Lightweight M2M enabler includes device management and service enablement for LwM2M Devices. The target LwM2M Devices for this enabler are mainly resource constrained devices. Therefore, this enabler makes use of a light and compact protocol as well as an efficient resource data model.</p>
<p>A Client-Server architecture is introduced for the LwM2M Enabler, where the LwM2M Device acts as a LwM2M Client and the M2M service, platform or application acts as the LwM2M Server. The LwM2M Enabler has two components, LwM2M Server and LwM2M Client. Four interfaces are designed between these two components:</p>
<ul class="simple">
<li>Bootstrap</li>
<li>Client Registration</li>
<li>Device management and service enablement</li>
<li>Information Reporting</li>
</ul>
</div>
<div class="section" id="bootstrap-interface">
<h3>Bootstrap Interface<a class="headerlink" href="#bootstrap-interface" title="Permalink to this headline">¶</a></h3>
<p>The Bootstrap Interface is used to provision essential information into the LwM2M Client to enable the LwM2M Client to perform the operation “Register” with one or more LwM2M Servers.</p>
<p>During the Bootstrap Phase, the Client may ignore requests and flush all pending responses not related to the Bootstrap sequence. There are four bootstrap modes supported by the LwM2M Enabler:</p>
<ul class="simple">
<li>Factory Bootstrap</li>
<li>Bootstrap from Smartcard</li>
<li>Client Initiated Bootstrap</li>
<li>Server Initiated Bootstrap</li>
</ul>
<p>The last two Bootstrap modes require the help of a LwM2M Bootstrap-Server to achieve the ultimate goal to connect a LwM2M Client to their LwM2M Server(s).</p>
<p>The LwM2M Client must support at least one bootstrap mode specified in the Bootstrap Interface.</p>
<p>The LwM2M Bootstrap-Server must support Client Initiated Bootstrap and Server Initiated Bootstrap modes specified in the Bootstrap Interface.</p>
</div>
<div class="section" id="client-registration-interface">
<h3>Client Registration Interface<a class="headerlink" href="#client-registration-interface" title="Permalink to this headline">¶</a></h3>
<p>The LwM2M Server must support all the operations in this interface and the LwM2M Client must support “Register” and “Update” and should support “De-register” operation.</p>
<p>The Client Registration Interface is used by a LwM2M Client to register with one or more LwM2M Servers, maintain each registration and de-register from a LwM2M Server. The registration is
based on the Resource Model and Identifiers defined in Section 6 Identifiers and Resources. When registering, the LwM2M Client performs the “Register” operation and provides the properties
the LwM2M Server requires to contact the LwM2M Client (e.g., End Point Name); maintain the registration and session (e.g., Lifetime, Queue Mode) between the LwM2M Client and LwM2M Server as
well as knowledge of the Objects the LwM2M Client supports and existing Object Instances in the LwM2M Client. The registration is soft state, with a lifetime indicated by the Lifetime
Resource of that LwM2M Server Object Instance. The LwM2M Client periodically performs an update of its registration information to the registered LwM2M Server(s) by performing the “Update”
operation– possibly without any parameters. If the lifetime of a registration expires without receiving an update from the LwM2M Client:</p>
<ul class="simple">
<li>The LwM2M Server must remove the registration of that Client.</li>
<li>The LwM2M Client must re-register (“Update” is not sufficient) to the LwM2M Server in order to be connected again, before initiating any further communication.</li>
</ul>
<p>If the LwM2M Server or the LwM2M Client set a value to the Lifetime Resource of the Server Object Instance, this value becomes the new lifetime of the Registration session.</p>
<p>During “Register” or “Update” Operations, the parameter Lifetime – if present – must match the current value of the Mandatory Lifetime Resource of the LwM2M Server Object Instance. Finally,
when shutting down or discontinuing use of a LwM2M Server, the LwM2M Client performs a “De-register” operation.</p>
<p>The Binding Resource of the LwM2M Server Object informs the LwM2M Client of the transport protocol preferences of the LwM2M Server for the communication session between the LwM2M Client
and LwM2M Server.</p>
<p>The LwM2M Client should perform the operations with the modes indicated by the Binding Resource of the LwM2M Server Object Instance.</p>
</div>
<div class="section" id="device-management-and-service-enablement-interface">
<h3>Device Management and Service Enablement Interface<a class="headerlink" href="#device-management-and-service-enablement-interface" title="Permalink to this headline">¶</a></h3>
<p>The LwM2M Server and the LwM2M Client must support all the operations in this interface.</p>
<p>The Device Management and Service Enable Interface is used by the LwM2M Server to access Object Instances and Resources available from a registered LwM2M Client. The interface provides
this access through the use of “Create”, “Read”, “Write”, “Delete”, “Execute”, “Write-Attributes”, or “Discover” operations.</p>
<p>The Device Management and Service Enablement interface defines the following commands:</p>
<ul class="simple">
<li><strong>Read</strong> operation is used to access the value of a Resource, an array of Resource Instances, an Object Instance or all the Object Instances of an Object.</li>
<li><strong>Discover</strong> operation is used to discover LwM2M Attributes attached to an Object, Object Instances, and Resources. This operation can be used to discover which Resources are instantiated in a given Object Instance.</li>
<li><strong>Write</strong> operation is used to change the value of a Resource, the values of an array of Resources Instances or the values of multiple Resources from an Object Instance.</li>
<li><strong>Write-Attributes:</strong> In LwM2M 1.0, only Attributes from the <strong>&lt;NOTIFICATION&gt;</strong> class may be changed in using the “Write-Attributes” operation. The operation permits multiple Attributes to be modified within the same operation.</li>
<li><strong>Execute</strong> operation is used by the LwM2M Server to initiate some action, and can only be performed on individual Resources. A LwM2M Client must return an error when the “Execute” operation is received for an Object Instance(s) or Resource Instance(s).</li>
<li><strong>Create</strong> operation is used by the LwM2M Server to create Object Instance(s) within the LwM2M Client. The “Create” operation must target an Object. If any error occurs, nothing must be created.</li>
<li>Finally, the <strong>Delete</strong> operation is used for LwM2M Server to delete an Object Instance within the LwM2M Client.</li>
</ul>
<p>The Object Instance that is deleted in the LwM2M Client by the LwM2M Server must be an Object Instance that is announced by the LwM2M Client to the LwM2M Server using the “Register” and “Update” operations of the Client Registration Interface.</p>
</div>
<div class="section" id="information-reporting-interface">
<h3>Information Reporting Interface<a class="headerlink" href="#information-reporting-interface" title="Permalink to this headline">¶</a></h3>
<p>The LwM2M Server and the LwM2M Client must support all the operations in this interface.</p>
<p>The Information Reporting Interface is used by a LwM2M Server to observe any changes in a Resource on a registered LwM2M Client, receiving notifications when new values are available. This observation relationship is initiated by sending an “Observe” operation to the LwM2M Client for an Object, an Object Instance or a Resource. An observation ends when a “Cancel Observation” operation is performed.</p>
<ul class="simple">
<li><strong>Observe:</strong> The LwM2M Server initiates an observation request for changes of a specific Resource, Resources within an Object Instance or for all the Object Instances of an Object within the LwM2M Client.</li>
<li><strong>Notify:</strong> The “Notify” operation is sent from the LwM2M Client to the LwM2M Server during a valid observation on an Object Instance or Resource. This operation includes the new value of the Object Instance or Resource. The “Notify” operation should be sent when all the conditions (i.e., Minimum Period, Maximum Period, Greater Than, Less Than, Step) configured by “Write-Attributes” operation for “Observe” operation are met.</li>
<li><strong>Cancel Observation:</strong> The “Cancel Observation” operation is sent from the LwM2M Server to the LwM2M Client to end an observation relationship for Object Instance or Resource.</li>
</ul>
</div>
</div>
<div class="section" id="annex-2-fiware-docker-architecture">
<h2>ANNEX 2: FIWARE-DOCKER Architecture<a class="headerlink" href="#annex-2-fiware-docker-architecture" title="Permalink to this headline">¶</a></h2>
<p>FIWARE IoT Stack allows you to connect devices and receive data. Though to FIWARE IoT Stack we can understand, interpret and process the data relative to physical devices. In this document,
we have exposed and defined the components of FIWARE IoT Stack we have used in a summarized fashion.</p>
<div class="section" id="mongodb">
<h3>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h3>
<p>MongoDB is a free and open-source database. It is classified as a NoSQL database. Instead of save the data on tables like is done in relational databases, MongoDB save data structure on
documents similar to JSON with a dynamic diagram, making that the data integration on certain application be more easy and quickly.</p>
<p>This database is connected with:</p>
<ul class="simple">
<li>STH Comet save aggregated data.</li>
<li>Cygnus save raw data.</li>
<li>Orion Context Broker save subscriptions.</li>
<li>IoT Agent save device mapping.</li>
</ul>
<p>More information about the component can be found in the MongoDB documentation: <a class="reference external" href="https://docs.mongodb.com">https://docs.mongodb.com</a></p>
</div>
<div class="section" id="sth-comet">
<h3>STH-Comet<a class="headerlink" href="#sth-comet" title="Permalink to this headline">¶</a></h3>
<p>The Short Time Historic (STH) is a component of the FIWARE in charge of manage historical time series information about the evolution of context data registered in an Orion Context Broker
instance over time. STH can be considered as a Time Series Database. This component has a main functionality:</p>
<ul class="simple">
<li>Retrieves, store, update or delete raw and aggregated time series context information.</li>
</ul>
<p>Also, STH is connected to:</p>
<ul class="simple">
<li>MongoDB is in charge of store the desired raw and aggregated time series context information managed by the STH component.</li>
<li>Cygnus is needs to store the raw and aggregated time series context information into the STH component following the formal option, because Cygnus is in charge of store the context</li>
</ul>
<p>information managed by an Orion Context Broker instance over time. In other words, Cygnus notify to STH-Comet with data received.</p>
<p>More information about the component can be found in the Fiware-STH-Comet documentation: <a class="reference external" href="https://fiware-sthcomet.readthedocs.io/en/latest/index.html">https://fiware-sthcomet.readthedocs.io/en/latest/index.html</a></p>
</div>
<div class="section" id="id3">
<h3>Cygnus<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Cygnus is based on Apache Flume, a distributed service for collecting, aggregating and moving data. Cygnus is a connector in charge of persisting Orion context data. Store the Orion
Context Broker entities data, allows create a historical view of this data. Cygnus subscribes to Orion and receive entities data when this entities are modified. Cygnus defined what
data it is interested in an Orion entity. Cygnus allows:</p>
<ul class="simple">
<li>Store the last value of an entity’s attribute. If and older value is required, Cygnus receives it and sends to the applicant.</li>
</ul>
<p>Cygnus is connected to:</p>
<ul class="simple">
<li>STH-Comet. Cygnus notify to STH-Comet when a data received. A STH database built on top of MongoDB.</li>
<li>Orion. Cygnus is subscribed to Orion Context Broker for receive data about entities it interesting.</li>
<li>MongoDB. Cygnus store the context data in a MongoDB database.</li>
</ul>
<p>More information about the component can be found in the Cygnus documentation: <a class="reference external" href="http://fiware-cygnus.readthedocs.io/en/1.7.1/index.html">http://fiware-cygnus.readthedocs.io/en/1.7.1/index.html</a></p>
</div>
<div class="section" id="id4">
<h3>Orion Context Broker<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Orion is a C++ implementation developed as a part of FIWARE platform. Orion Context Broker is in charge of manage all the lifecycle of context information including update, queries,
registrations and delete. Orion allows subscribe to a context information for notify when any modify occur and create and modify entities through queries. Currently coexist the NGSIv1
version and the NGSIv2.</p>
<p>Orion Context Broker allows:</p>
<ul class="simple">
<li>Manage of entities. OCB is in charge of create, update, retrieve and delete an entity or list of entities. Also, allows manage entities by their type.</li>
<li>Manage of context information. OCB allows create, update and delete a context information.</li>
<li>Manage of subscription. OCB is in charge of create, update, retrieve and delete a subscription.</li>
</ul>
<p>Also, Orion Context Broker depends on:</p>
<ul class="simple">
<li>MongoDB. This database store the subscriptions they want to be notified when modify occur.</li>
<li>IoT Agent. IoT Agent is subscribed to Orion Context Broker for receive data about entities it interesting.</li>
<li>Cygnus. Cygnus is subscribed to Orion Context Broker for receive data about entities it interesting.</li>
<li>QuantumLeap. QuantumLeap is subscribed to Orion Context Broker for receive data about entities it interesting.</li>
<li>Perseo-fe. Perseo-fe is subscribed to Orion Context Broker for receive data about entities it interesting.</li>
</ul>
<p>More information about the component can be found in the Orion Context Broker documentation: <a class="reference external" href="https://fiware-orion.readthedocs.io/en/master/index.html">https://fiware-orion.readthedocs.io/en/master/index.html</a></p>
</div>
<div class="section" id="iot-agent">
<h3>IoT Agent<a class="headerlink" href="#iot-agent" title="Permalink to this headline">¶</a></h3>
<p>IoT Agent it’s a component in charge on stores devices data. IoT Agent receive data in M2M language and then it translate to standard platform language to can be processed for Orion
Context Broker. In other words, IoT Agent converts the physical devices to an Orion Context Broker entity. Also, IoT Agent allows to send commands to devices. IoT Agents supports OMA
lightweight M2M protocol and JSON protocol.</p>
<p>IoT Agent has various functionalities:</p>
<ul class="simple">
<li>Transforms the physical devices to an entities it can be manage in Orion Context Broker.</li>
<li>IoT Agent take part between OMA LWM2M and JSON Objects.</li>
<li>Store the translation of a physical device in a persistent storage.</li>
</ul>
<p>Also, IoT Agent is connected to:</p>
<ul class="simple">
<li>Orion. IoT Agent send the JSON objects representing physical devices to Orion.</li>
<li>MongoDB. Store the mapping of the physical device in a MongoDB database.</li>
</ul>
<p>More information about the component can be found in the IoT Agent for OMA LWM2M documentation: <a class="reference external" href="http://fiwareiotagent-lwm2m.readthedocs.io/en/latest/index.html">http://fiwareiotagent-lwm2m.readthedocs.io/en/latest/index.html</a></p>
</div>
<div class="section" id="grafana">
<h3>Grafana<a class="headerlink" href="#grafana" title="Permalink to this headline">¶</a></h3>
<p>Grafana is an open source application allows generate dashboards from data contained in CrateDB database. The CrateDB data is displayed in a dashboards, and the user can display the data
the way his want it. However, Orion Context Broker store the information in MongoDB database. To store the relevant Orion Context Information data in a CrateDB database we need QuantumLeap
to convert the OCB data to CrateDB data.</p>
<p>Grafana has a main functionality:</p>
<ul class="simple">
<li>Show the values of the Orion Context Broker entities as a graph order by data time.</li>
</ul>
<p>Grafana is connected to:</p>
<ul class="simple">
<li>CrateDB. Grafana shows data belonging to CrateDB database.</li>
<li>QuantumLeap. Convert the storage of NGSI FIWARE NGSIv2 data into a time series database for CrateDB.</li>
</ul>
<p>More information about the component can be found in the Grafana experiments: <a class="reference external" href="https://github.com/smartsdk/ngsitimeseries-api/tree/master/experiments/grafana">https://github.com/smartsdk/ngsitimeseries-api/tree/master/experiments/grafana</a></p>
</div>
<div class="section" id="quantumleap">
<h3>QuantumLeap<a class="headerlink" href="#quantumleap" title="Permalink to this headline">¶</a></h3>
<p>QuantumLeap is an API that supports the storage of NGSI FIWARE NGSIv2 data into a time series database. The client create an Orion subscription to notify QuantumLeap of the update in the
entities it interesting. QuantumLeap translate the NGSI information receive to Orion subscription to CrateDB database, and persisting it.</p>
<p>QuantumLeap allows:</p>
<ul class="simple">
<li>Convert the Orion Context Broker information to CrateDB data.</li>
<li>Supported integration with dashboard application like Grafana.</li>
</ul>
<p>QuantumLeap is connected to:</p>
<ul class="simple">
<li>CrateDB. QuantumLeap allows to CrateDB store the Orion Context Broker entities data.</li>
<li>Orion Context Broker. QuantumLeap is subscribed to Orion Context Broker for receive data about entities it interesting.</li>
</ul>
<p>More information about the component can be found in the QuantumLeap documentation: <a class="reference external" href="https://smartsdk.github.io/ngsi-timeseries-api/">https://smartsdk.github.io/ngsi-timeseries-api/</a></p>
</div>
<div class="section" id="cratedb">
<h3>CrateDB<a class="headerlink" href="#cratedb" title="Permalink to this headline">¶</a></h3>
<p>CrateDB is a distributed SQL database in charge to store and analyze machine data in real-time. Crate is the database where NGSI data will be persisted after its converts to a data time
series. Once the Orion subscription of QuantumLeap is created, when QuantumLeap receives NGSI information, coverts it and stores this information in a CrateDB database.</p>
<p>CrateDB has various functionalities:</p>
<ul class="simple">
<li>Stores the data as a data time series.</li>
<li>Allows show the data it contained with dashboards application.</li>
</ul>
<p>CrateDB is connected to:</p>
<ul class="simple">
<li>QuantumLeap. CrateDB is the QuantumLeap’s backend where NGSI data converted will be stored.</li>
<li>Grafana. Grafana generate dashboards from data of CrateDB database, it obtains thanks to QuantumLeap.</li>
</ul>
<p>More information about the component can be found in the CrateDB documentation: <a class="reference external" href="https://crate.io/docs/clients/admin-ui/en/latest/index.html">https://crate.io/docs/clients/admin-ui/en/latest/index.html</a></p>
</div>
<div class="section" id="perseo-core">
<h3>Perseo-core<a class="headerlink" href="#perseo-core" title="Permalink to this headline">¶</a></h3>
<p>Perseo-core is the rules engine of Perseo CEP, the “back-end”. It receives the events through a POST a JSON object and apply the functions generate by this JSON object. In case of must to
execute an action, it informs to Perseo-fe through a POST request. EPL is the language of rules of Esper. Esper is a Java library in charge of event processing logic and the rules engine.
The defined rules aren’t stored persistently, but kept in memory, and it can update from Perseo-fe.</p>
<p>Perseo-core has the following functionality:</p>
<ul class="simple">
<li>Perseo-core trigger events through a POST request to Perseo-fe if any rule is complied it.</li>
<li>Acts as the rules engine and event process logic of Perseo CEP.</li>
</ul>
<p>Perseo-core is connected to:</p>
<ul class="simple">
<li>Perseo-fe. Perseo-fe send to perseo-core a rule and event, Perseo-core process the information and, if any rule is complied it, send an action to Perseo-fe.</li>
</ul>
<p>More information about the component can be found in the Perseo-core documentation: <a class="reference external" href="https://github.com/telefonicaid/perseo-core/tree/master/documentation">https://github.com/telefonicaid/perseo-core/tree/master/documentation</a></p>
</div>
<div class="section" id="perseo-fe">
<h3>Perseo-fe<a class="headerlink" href="#perseo-fe" title="Permalink to this headline">¶</a></h3>
<p>Perseo-fe is a component that together with Perseo-core form the Perseo CEP, the “front-end”. It processing incoming events a rules, storing rules and executing actions. When Perseo-core
send an action to Perseo-fe, it is responsible of send an action via SMS, e-mail o HTTP. We must have configured the following servers if we can send a notification: SMPP, SMTP and HTTP.</p>
<p>Perseo-fe allows:</p>
<ul class="simple">
<li>Send a SMS, e-mail, HTT Post or a tweet if it receive from Perseo-fe any action.</li>
<li>Receives events of creation or update of Orion Context Broker entities.</li>
<li>Store the rules to check when it receive an events.</li>
</ul>
<p>Perseo-fe is connected to:</p>
<ul class="simple">
<li>Orion. Perseo-fe is subscribed to Orion Context Broker for receive data about entities it interesting.</li>
<li>Perseo-core. Perseo-core is the event processing logic and the rules engine of Perseo-fe, his brain.</li>
</ul>
<p>More information about the component can be found in the Perseo-fe documentation: <a class="reference external" href="https://github.com/telefonicaid/perseo-fe/tree/master/documentation">https://github.com/telefonicaid/perseo-fe/tree/master/documentation</a></p>
</div>
</div>
<div class="section" id="annex-3-sth-comet-restful-api">
<h2>ANNEX 3: STH-Comet RESTFul API<a class="headerlink" href="#annex-3-sth-comet-restful-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="retrieve-raw-values-with-pagination">
<h3>Retrieve raw values with pagination<a class="headerlink" href="#retrieve-raw-values-with-pagination" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="54%" />
<col width="2%" />
<col width="29%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="7"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}</td>
<td rowspan="7">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="7">Method to retrieve all changes of an attribute.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-even"><td><strong>fiware-offset</strong>: The offset to apply to the requested search of raw context information.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>From all registered changes of the attribute will choose the number of changes specified in “fiware-limit” and depending on the value of “fiware-offset” will return certain changes.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-raw-values-with-pagination-and-filetype">
<h3>Retrieve raw values with pagination and filetype<a class="headerlink" href="#retrieve-raw-values-with-pagination-and-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="2%" />
<col width="33%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="8"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="8">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="8">Method to retrieve all changes of an attribute.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-even"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-filetype</strong>: File format will be saved the changes of the attribute. Currently, the only supported value is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the number of changes of the attribute specified in “fiware-limit” and from all changes registered, certain changes are chosen depending on the value of “fiware-offset”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values">
<h3>Retrieve n raw values<a class="headerlink" href="#retrieve-n-raw-values" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="2%" />
<col width="27%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="6"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?lastN={{fiware-lastN}}</td>
<td rowspan="6">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="6">Method to retrieve the last “n” changes of an attribute.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>The last “n” changes of the attribute.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-with-pagination">
<h3>Retrieve n raw values with pagination<a class="headerlink" href="#retrieve-n-raw-values-with-pagination" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="2%" />
<col width="25%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="8"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}</td>
<td rowspan="8">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="8">Method to retrieve the last “n” changes of an attribute.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-even"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>From last “n” registered changes of the attribute will choose the number of changes specified in “fiware-limit” and depending on the value of “fiware-offset” will return certain changes.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-with-filetype">
<h3>Retrieve n raw with filetype<a class="headerlink" href="#retrieve-n-raw-with-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="2%" />
<col width="34%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="7"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?lastN={{fiware-lastN}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="7">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="7">Method to retrieve the last “n” changes of an attribute.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
<tr class="row-even"><td><strong>fiware-filetype</strong>: File format will be saved all changes of the attribute. Currently, the only supported value is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the last “n” registered changes of the attribute.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-with-pagination-and-filetype">
<h3>Retrieve n raw values with pagination and filetype<a class="headerlink" href="#retrieve-n-raw-values-with-pagination-and-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="54%" />
<col width="2%" />
<col width="30%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="9"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}&amp;lastN={{fiware-lastN}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="9">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="9">Method to retrieve the last “n” changes of an attribute.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-even"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
<tr class="row-even"><td><strong>fiware-filetype</strong>: File format will be saved all changes of the attribute. Currently, the only supported value is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the number of changes of the attribute specified in “fiware-limit” and from the last “n” changes registered certain changes are chosen depending on the value of
“fiware-offset”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-raw-values-between-two-dates-with-pagination">
<h3>Retrieve raw values between two dates with pagination<a class="headerlink" href="#retrieve-raw-values-between-two-dates-with-pagination" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="2%" />
<col width="25%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="9"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;dateTo={{fiware-dateTo}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}</td>
<td rowspan="9">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="9">Method to retrieve all changes of an attribute between two dates.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-even"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>From all registered changes of the attribute between the two specified dates will choose the number of changes specified in “fiware-limit” and depending on the value of
“fiware-offset” will return certain changes.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-between-two-dates">
<h3>Retrieve n raw values between two dates<a class="headerlink" href="#retrieve-n-raw-values-between-two-dates" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="2%" />
<col width="26%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="8"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;dateTo={{fiware-dateTo}}&amp;lastN={{fiware-lastN}}</td>
<td rowspan="8">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="8">Method to retrieve the last “n” changes of an attribute between two dates.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>The last “n” registered changes of the attribute between the two specified dates.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-raw-value-between-two-dates-with-pagination-and-filetype">
<h3>Retrieve raw value between two dates with pagination and filetype<a class="headerlink" href="#retrieve-raw-value-between-two-dates-with-pagination-and-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="2%" />
<col width="30%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="10"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;dateTo={{fiware-dateTo}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="10">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="10">Method to retrieve all changes of an attribute between two dates.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-even"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-filetype</strong>: File format will be saved all changes of the attribute. Currently, the only supported value and file type is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the number of changes of the attribute specified in “fiware-limit” and from all changes registered between the two specified dates, certain changes are chosen
depending on the value of “fiware-offset”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-between-two-dates-with-pagination">
<h3>Retrieve n raw values between two dates with pagination<a class="headerlink" href="#retrieve-n-raw-values-between-two-dates-with-pagination" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="58%" />
<col width="2%" />
<col width="23%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="10"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;dateTo={{fiware-dateTo}}&amp;lastN={{fiware-lastN}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}</td>
<td rowspan="10">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="10">Method to retrieve the last “n” changes of an attribute between two dates.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
<tr class="row-even"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>From the last “n” registered changes of the attribute between the two specified dates will choose the number of changes specified in “fiware-limit” and depending on the value of
“fiware-offset” will return certain changes.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-between-two-dates-with-filetype">
<h3>Retrieve n raw values between two dates with filetype<a class="headerlink" href="#retrieve-n-raw-values-between-two-dates-with-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="2%" />
<col width="31%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="9"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;dateTo={{fiware-dateTo}}&amp;lastN={{fiware-lastN}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="9">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="9">Method to retrieve the last “n” changes of an attribute between two dates.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
<tr class="row-even"><td><strong>fiware-filetype</strong>: File format will be saved all changes of the attribute. Currently, the only supported value and file type is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the last “n” registered changes of the attribute between the two specified dates.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-between-two-dates-with-pagination-and-filetype">
<h3>Retrieve n raw values between two dates with pagination and filetype<a class="headerlink" href="#retrieve-n-raw-values-between-two-dates-with-pagination-and-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="56%" />
<col width="1%" />
<col width="28%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="10"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;dateTo={{fiware-dateTo}}&amp;lastN={{fiware-lastN}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="10">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="10">Method to retrieve the last “n” changes of an attribute between two dates.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-even"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-filetype</strong>: File format will be saved all changes of the attribute. Currently, the only supported value and file type is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the number of changes of the attribute specified in “fiware-limit” and from the last “n” changes registered between the two specified dates, certain changes
are chosen depending on the value of “fiware-offset”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-raw-values-after-a-date-with-pagination">
<h3>Retrieve raw values after a date with pagination<a class="headerlink" href="#retrieve-raw-values-after-a-date-with-pagination" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="54%" />
<col width="2%" />
<col width="27%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="8"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}</td>
<td rowspan="8">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="8">Method to retrieve all changes of an attribute after a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>From all registered changes of the attribute after the specified date will choose the number of changes specified in “fiware-limit” and depending on the value of
“fiware-offset” will return certain changes.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-after-date-with-pagination">
<h3>Retrieve n raw values after date with pagination<a class="headerlink" href="#retrieve-n-raw-values-after-date-with-pagination" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="2%" />
<col width="25%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="9"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}&amp;lastN={{fiware-lastN}}</td>
<td rowspan="9">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="9">Method to retrieve the last “n” of an attribute after a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
<tr class="row-even"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>From the last “n” registered changes of the attribute after the specified date will choose the number of changes pecified in “fiware-limit” and depending on the value of
“fiware-offset” will return certain changes.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-raw-values-after-date-with-pagination-and-filetype">
<h3>Retrieve raw values after date with pagination and filetype<a class="headerlink" href="#retrieve-raw-values-after-date-with-pagination-and-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="2%" />
<col width="31%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="9"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="9">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="9">Method to retrieve all changes of an attribute after a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
<tr class="row-even"><td><strong>fiware-lastN</strong>: File format will be saved all changes of the attribute. Currently, the only supported value and file type is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the number of changes of the attribute specified in “fiware-limit” and from all changes registered after the specified date, certain changes are chosen
depending on the value of “fiware-offset”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-after-date">
<h3>Retrieve n raw values after date<a class="headerlink" href="#retrieve-n-raw-values-after-date" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="2%" />
<col width="29%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="7"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;lastN={{fiware-lastN}}</td>
<td rowspan="7">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="7">Method to retrieve the last “n” of an attribute after a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>The last “n” registered changes of the attribute and after the specified date.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-after-date-with-filetype">
<h3>Retrieve n raw values after date with filetype<a class="headerlink" href="#retrieve-n-raw-values-after-date-with-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="2%" />
<col width="34%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="8"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;lastN={{fiware-lastN}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="8">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="8">Method to retrieve the last “n” of an attribute after a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-filetype</strong>: File format will be saved all changes of the attribute. Currently, the only supported value and file type is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the last “n” registered changes of the attribute after the specified date.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-after-date-with-pagination-and-filetype">
<h3>Retrieve n raw values after date with pagination and filetype<a class="headerlink" href="#retrieve-n-raw-values-after-date-with-pagination-and-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="2%" />
<col width="30%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="7"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateFrom={{fiware-dateFrom}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}&amp;lastN={{fiware-lastN}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="7">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="7">Method to retrieve the last “n” of an attribute after a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the number of changes of the attribute specified in “fiware-limit” and from the last “n” changes registered after the specified date, certain
changes are chosen depending on the value of “fiware-offset”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-before-date-with-pagination-and-filetype">
<h3>Retrieve n raw values before date with pagination and filetype<a class="headerlink" href="#retrieve-n-raw-values-before-date-with-pagination-and-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="54%" />
<col width="2%" />
<col width="30%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="10"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateTo={{fiware-dateTo}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}&amp;lastN={{fiware-lastN}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="10">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="10">Method to retrieve the last “n” registered changes before a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-even"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-filetype</strong>: File format will be saved all changes of the attribute. Currently, the only supported value and file type is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the number of changes of the attribute specified in “fiware-limit” and from the last “n” changes registered before the specified date, certain changes are
chosen depending on the value of “fiware-offset”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-before-date-with-pagination">
<h3>Retrieve n raw values before date with pagination<a class="headerlink" href="#retrieve-n-raw-values-before-date-with-pagination" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="2%" />
<col width="32%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="9"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateTo={{fiware-dateTo}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}&amp;lastN={{fiware-lastN}}</td>
<td rowspan="9">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="9">Method to retrieve the last “n” registered changes before a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-even"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>From the last “n” registered changes of the attribute before the specified date will choose the number of changes specified in “fiware-limit” and depending on the value of
“fiware-offset” will return certain changes.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-before-date-with-filetype">
<h3>Retrieve n raw values before date with filetype<a class="headerlink" href="#retrieve-n-raw-values-before-date-with-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="2%" />
<col width="34%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="8"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateTo={{fiware-dateTo}}&amp;lastN={{fiware-lastN}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="8">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="8">Method to retrieve the last “n” registered changes before a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-filetype</strong>: File format will be saved all changes of the attribute. Currently, the only supported value and file type is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the last “n” registered changes of the attribute before the specified date.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-n-raw-values-before-date">
<h3>Retrieve n raw values before date<a class="headerlink" href="#retrieve-n-raw-values-before-date" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="2%" />
<col width="36%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="7"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateTo={{fiware-dateTo}}&amp;lastN={{fiware-lastN}}</td>
<td rowspan="7">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="7">Method to retrieve the last “n” registered changes before a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-lastN</strong>: Entries number will be returned.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>The last “n” changes of the attribute before the specified date.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-raw-values-before-date-with-pagination">
<h3>Retrieve raw values before date with pagination<a class="headerlink" href="#retrieve-raw-values-before-date-with-pagination" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="2%" />
<col width="27%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="8"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateTo={{fiware-dateTo}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}</td>
<td rowspan="8">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="8">Method to retrieve all registered changes before a date.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>From all registered changes of the attribute before the specified date will choose the number of changes specified in “fiware-limit” and depending on the value of
“fiware-offset” will return certain changes.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-raw-values-before-date-with-pagination-and-filetype">
<h3>Retrieve raw values before date with pagination and filetype<a class="headerlink" href="#retrieve-raw-values-before-date-with-pagination-and-filetype" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="2%" />
<col width="31%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="9"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?dateTo={{fiware-dateTo}}&amp;hLimit={{fiware-limit}}&amp;hOffset={{fiware-offset}}&amp;filetype={{fiware-filetype}}</td>
<td rowspan="9">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="9">Method to retrieve all registered changes before a date of an attribute.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateTo</strong>: The final date and time until which the raw context information is desired.</td>
</tr>
<tr class="row-even"><td><strong>fiware-limit</strong>: Entries number for each page.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-offset</strong>: Entries offset number.</td>
</tr>
<tr class="row-even"><td><strong>fiware-filetype</strong>: File format will be saved all changes of the attribute. Currently, the only supported value and file type is “csv”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>Setting file with the number of changes of the attribute specified in “fiware-limit” and from all changes registered before the specified date, certain changes are chosen
depending on the value of “fiware-offset”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-aggregated-values">
<h3>Retrieve aggregated values<a class="headerlink" href="#retrieve-aggregated-values" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="1%" />
<col width="63%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="7"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?aggrMethod={{fiware-method}}&amp;aggrPeriod={{fiware-period}}</td>
<td rowspan="7">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="7">Method to retrieve aggregated value of an attribute based on “fiwaremethod” with a resolution defined in “fiware-period”.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-method</strong>: The aggregation method. The STH component supports the following aggregation methods: max (maximum value), min (minimum value), sum (sum of all the samples) and sum2 (sum of the square value of all the samples) for numeric attribute values and occur for attributes values of type string. Combining the information provided by these aggregated methods with the number of samples, it is possible to calculate probabilistic values such as the average value, the variance as well as the standard deviation.</td>
</tr>
<tr class="row-even"><td><strong>fiware-period</strong>: Aggregation period or resolution. A fixed resolution determines the origin time format and the possible offsets. The STH component supports the following aggregation periods: month, day, hour, minute and second.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>If the type is String then returns the number of samples and for each value that has been registered the number of times it appears in the samples.

If the type is numerical then returns the number of samples of the attribute and depending on the value of “fiwaremethod” will calculated a value from all samples.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-aggregate-values-between-two-dates">
<h3>Retrieve aggregate values between two dates<a class="headerlink" href="#retrieve-aggregate-values-between-two-dates" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="1%" />
<col width="58%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="7"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?aggrMethod={{fiware-method}}&amp;aggrPeriod={{fiware-period}}&amp;dateFrom={{fiware-dateFrom}}&amp;dateTo={{fiware-dateTo}}</td>
<td rowspan="7">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="7">Method to retrieve aggregated value of an attribute between two dates based on “fiwaremethod” with a resolution defined in “fiware-period”.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-method</strong>: The aggregation method. The STH component supports the following aggregation methods: max (maximum value), min (minimum value), sum (sum of all the samples) and sum2 (sum of the square value of all the samples) for numeric attribute values and occur for attributes values of type string. Combining the information provided by these aggregated methods with the number of samples, it is possible to calculate probabilistic values such as the average value, the variance as well as the standard deviation.</td>
</tr>
<tr class="row-even"><td><strong>fiware-period</strong>: Aggregation period or resolution. A fixed resolution determines the origin time format and the possible offsets. The STH component supports the following aggregation periods: month, day, hour, minute and second.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>If the type is String then returns the number of samples and for each value that has been registered the number of times it appears in the samples.

If the type is numerical then returns the number of samples of the attribute and depending on the value of “fiwaremethod” will calculated a value from all samples.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-aggregate-values-after-date">
<h3>Retrieve aggregate values after date<a class="headerlink" href="#retrieve-aggregate-values-after-date" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="1%" />
<col width="60%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="8"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?aggrMethod={{fiware-method}}&amp;aggrPeriod={{fiware-period}}&amp;dateFrom={{fiware-dateFrom}}</td>
<td rowspan="8">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="8">Method to retrieve aggregated value of an attribute between two dates based on “fiwaremethod” with a resolution defined in “fiware-period”.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-method</strong>: The aggregation method. The STH component supports the following aggregation methods: max (maximum value), min (minimum value), sum (sum of all the samples) and sum2 (sum of the square value of all the samples) for numeric attribute values and occur for attributes values of type string. Combining the information provided by these aggregated methods with the number of samples, it is possible to calculate probabilistic values such as the average value, the variance as well as the standard deviation.</td>
</tr>
<tr class="row-even"><td><strong>fiware-period</strong>: Aggregation period or resolution. A fixed resolution determines the origin time format and the possible offsets. The STH component supports the following aggregation periods: month, day, hour, minute and second.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateFrom</strong>: The starting date and time from which the aggregated time series information is desired.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>If the type is String then returns the number of samples and for each value that has been registered the number of times it appears in the samples.

If the type is numerical then returns the number of samples of the attribute and depending on the value of “fiwaremethod” will calculated a value from all samples.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-aggregate-values-before-date">
<h3>Retrieve aggregate values before date<a class="headerlink" href="#retrieve-aggregate-values-before-date" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="1%" />
<col width="60%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="8"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-sth}}/STH/v1/contextEntities/type/{{fiware-type}}/id/{{fiware-entity}}/attributes/{{fiware-attr}}?aggrMethod={{fiware-method}}&amp;aggrPeriod={{fiware-period}}&amp;dateTo={{fiware-dateTo}}</td>
<td rowspan="8">GET</td>
<td><strong>url</strong>: Link to the service will be consulted.</td>
<td rowspan="8">Method to retrieve aggregated value of an attribute after a date based on “fiwaremethod” with a resolution defined in “fiware-period”.</td>
</tr>
<tr class="row-odd"><td><strong>port-sth</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-type</strong>: Type of the entity.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-entity</strong>: ID of the entity which will be consulted in the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-attr</strong>: ID of the attribute which will be consulted.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-method</strong>: The aggregation method. The STH component supports the following aggregation methods: max (maximum value), min (minimum value), sum (sum of all the samples) and sum2 (sum of the square value of all the samples) for numeric attribute values and occur for attributes values of type string. Combining the information provided by these aggregated methods with the number of samples, it is possible to calculate probabilistic values such as the average value, the variance as well as the standard deviation.</td>
</tr>
<tr class="row-even"><td><strong>fiware-period</strong>: Aggregation period or resolution. A fixed resolution determines the origin time format and the possible offsets. The STH component supports the following aggregation periods: month, day, hour, minute and second.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-dateTo</strong>:The final date and time until which the aggregated time series information is desired.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>If the type is String then returns the number of samples and for each value that has been registered the number of times it appears in the samples.

If the type is numerical then returns the number of samples of the attribute and depending on the value of “fiwaremethod” will calculated a value from all samples.
</pre></div>
</div>
</div>
</div>
<div class="section" id="annex-4-cygnus-restful-api">
<h2>ANNEX 4: Cygnus RESTFul API<a class="headerlink" href="#annex-4-cygnus-restful-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="retrieve-admin-login-v0">
<h3>Retrieve admin login v0<a class="headerlink" href="#retrieve-admin-login-v0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="5%" />
<col width="35%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/login</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve the logging level of Cygnus.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns the logging level of cygnus and “200 OK”.

In case of wrong execution, return “500 Internal Server Error”.
</pre></div>
</div>
</div>
<div class="section" id="update-admin-login-v0">
<h3>Update admin login v0<a class="headerlink" href="#update-admin-login-v0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="3%" />
<col width="50%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/log?level={{fiware-logLevel}}</td>
<td rowspan="3">PUT</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to update the logging level of Cygnus for an admin.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-logLevel</strong>: New level of log we want assigned. The valid loggins level are: <em>debug</em>, <em>info</em>, <em>warning</em>, <em>error</em> and <em>fatal</em>.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “200 OK”.

In case of wrong execution or invalid level, return “400 Bad Request”.
</pre></div>
</div>
</div>
<div class="section" id="create-agent-parameter-v0">
<h3>Create agent parameter v0<a class="headerlink" href="#create-agent-parameter-v0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="2%" />
<col width="21%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="5"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/configuration/agent/cygnus/apache-flume-1.4.0-bin/conf/{{fiware-agent}}?param={{fiware-param}}&amp;value={{fiware-paramValue}}</td>
<td rowspan="5">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="5">Method to create a new parameter in an agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-agent</strong>: Name of agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to create.</td>
</tr>
<tr class="row-even"><td><strong>fiware-paramValue</strong>: Value of parameter we want to create.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid configuration file, existing value or invalid path to the agent configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-agent-parameter-v0">
<h3>Retrieve agent parameter v0<a class="headerlink" href="#retrieve-agent-parameter-v0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="3%" />
<col width="23%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/configuration/agent/cygnus/apache-flume-1.4.0-bin/conf/{{fiware-agent}}&amp;param={{fiware-param}}</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to retrieve a defined parameter in an agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-agent</strong>: Name of agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to retrieve.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” with the attribute and it value.

In case of wrong execution by invalid configuration file, not found the parameter or invalid path to the agent configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-agent-parameters-v0">
<h3>Retrieve agent parameters v0<a class="headerlink" href="#retrieve-agent-parameters-v0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="3%" />
<col width="25%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/configuration/agent/cygnus/apacheflume-1.4.0-bin/conf/{{fiware-agent}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to retrieve all parameters in an agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-agent</strong>: Name of agent configuration file.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” with the attributes and its values.

In case of wrong execution by invalid configuration file or invalid path to the agent configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="update-agent-parameter-v0">
<h3>Update agent parameter v0<a class="headerlink" href="#update-agent-parameter-v0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="2%" />
<col width="21%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="5"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/configuration/agent/cygnus/apache-flume-1.4.0-bin/conf/{{fiware-agent}}?param={{fiware-param}}&amp;value={{fiware-paramValue}}</td>
<td rowspan="5">PUT</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="5">Method to create a new parameter in an agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-agent</strong>: Name of agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to update.</td>
</tr>
<tr class="row-even"><td><strong>fiware-paramValue</strong>: Value of parameter wue wat to update.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid configuration file, not found the parameter or invalid path to the agent configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="delete-agent-parameter-v0">
<h3>Delete agent parameter v0<a class="headerlink" href="#delete-agent-parameter-v0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="3%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/configuration/agent/cygnus/apache-flume-1.4.0-bin/conf/{{fiware-agent}}?param={{fiware-param}}</td>
<td rowspan="4">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to delete a parameter in an agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-agent</strong>: Name of agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to delete.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid configuration file, not found the attribute or invalid path to the agent configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="create-instance-parameter-v0">
<h3>Create instance parameter v0<a class="headerlink" href="#create-instance-parameter-v0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="2%" />
<col width="22%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="5"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/configuration/instance/usr/cygnus/conf/{{fiwareinstance}}?param={{fiwareparam}}&amp;value={{fiware-paramValue}}</td>
<td rowspan="5">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="5">Method to create a new parameter in an instance configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-instance</strong>: Name of instance configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to delete.</td>
</tr>
<tr class="row-even"><td><strong>fiware-paramValue</strong>: Value of parameter we want to create.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid configuration file, existing value or invalid path to the instance configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-instance-parameter-v0">
<h3>Retrieve instance parameter v0<a class="headerlink" href="#retrieve-instance-parameter-v0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="3%" />
<col width="23%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/configuration/instance/usr/cygnus/conf/{{fiware-instance}}?param={{fiware-param}}</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to retrieve a defined parameter in an instance configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-instance</strong>: Name of instance configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to retrieve.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” with the attribute and it value.

In case of wrong execution by invalid configuration file, not found the parameter or invalid path to the instance configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>Retrieve instance parameter v0<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="3%" />
<col width="22%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="5"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/configuration/instance/usr/cygnus/conf/{{fiware-instance}}?param={{fiware-param}}&amp;value={{fiware-paramValue}}</td>
<td rowspan="5">PUT</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="5">Method to update a parameter in an instance configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-instance</strong>: Name of instance configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to update.</td>
</tr>
<tr class="row-even"><td><strong>fiware-paramValue</strong>: Value of parameter we want to update.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid configuration file, not found the parameter or invalid path to the instance configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="delete-parameter-instance-v0">
<h3>Delete parameter instance v0<a class="headerlink" href="#delete-parameter-instance-v0" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="3%" />
<col width="24%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/admin/configuration/instance/usr/cygnus/conf/{{fiware-instance}}?param={{fiware-param}}</td>
<td rowspan="4">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to delete a parameter in an instance configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-instance</strong>: Name of instance configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to delete.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid configuration file, not found the attribute or invalid path to the instance configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="create-agent-parameter-v1-beta">
<h3>Create agent parameter v1 (beta)<a class="headerlink" href="#create-agent-parameter-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="2%" />
<col width="21%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="5"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/configuration/agent/cygnus/apache-flume-1.4.0-bin/conf/{{fiware-agent}}?param={{fiware-param}}&amp;value={{fiware-paramValue}}</td>
<td rowspan="5">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="5">Method to create a new parameter in an agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-agent</strong>: Name of agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to create.</td>
</tr>
<tr class="row-even"><td><strong>fiware-paramValue</strong>: Value of parameter we want to create.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid configuration file, existing value or invalid path to the agent configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-agent-parameter-v1-beta">
<h3>Retrieve agent parameter v1 (beta)<a class="headerlink" href="#retrieve-agent-parameter-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="3%" />
<col width="22%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/configuration/agent/cygnus/apache-flume-1.4.0-bin/conf/{{fiware-agent}}&amp;param={{fiware-param}}</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to retrieve a defined parameter in an agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-agent</strong>: Name of agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to retrieve.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” with the attribute and it value.

In case of wrong execution by invalid configuration file, not found the parameter or invalid path to the agent configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-agent-parameters-v1-beta">
<h3>Retrieve agent parameters v1 (beta)<a class="headerlink" href="#retrieve-agent-parameters-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="3%" />
<col width="25%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/configuration/agent/cygnus/apache-flume-1.4.0-bin/conf/{{fiware-agent}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to retrieve all parameters in an agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-agent</strong>: Name of agent configuration file.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” with the attribute and it value.

In case of wrong execution by invalid configuration file, not found the parameter or invalid path to the agent configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="update-agent-parameter-v1-beta">
<h3>Update agent parameter v1 (beta)<a class="headerlink" href="#update-agent-parameter-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="2%" />
<col width="21%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="5"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/configuration/agent/cygnus/apache-flume-1.4.0-bin/conf/{{fiware-agent}}?param={{fiware-param}}&amp;value={{fiware-paramValue}}</td>
<td rowspan="5">PUT</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="5">Method to create a new parameter in an agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-agent</strong>: Name of agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to update.</td>
</tr>
<tr class="row-even"><td><strong>fiware-paramValue</strong>: Value of parameter we want to update.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid configuration file, not found the parameter or invalid path to the agent configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="delete-agent-parameter-v1-beta">
<h3>Delete agent parameter v1 (beta)<a class="headerlink" href="#delete-agent-parameter-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="3%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/configuration/agent/cygnus/apache-flume-1.4.0-bin/conf/{{fiware-agent}}?param={{fiware-param}}</td>
<td rowspan="4">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to delete a parameter in an agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-agent</strong>: Name of agent configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to delete.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid configuration file, not found the parameter or invalid path to the instance configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="delete-parameter-instance-v1-beta">
<h3>Delete parameter instance v1 (beta)<a class="headerlink" href="#delete-parameter-instance-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="3%" />
<col width="23%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/configuration/instance/usr/cygnus/conf/{{fiware-instance}}?param={{fiware-param}}</td>
<td rowspan="4">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to create a new parameter in an instance configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-instance</strong>: Name of instance configuration file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-param</strong>: Name of parameter we want to delete.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid configuration file, not found the attribute or invalid path to the instance configuration file, return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-version-v1-beta">
<h3>Retrieve version v1 (beta)<a class="headerlink" href="#retrieve-version-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="4%" />
<col width="36%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/version</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve the version of the running software.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” and the version.

In case of wrong execution return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="create-grouping-rules-v1-beta">
<h3>Create grouping rules v1 (beta)<a class="headerlink" href="#create-grouping-rules-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="4%" />
<col width="33%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/groupingrules</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a new grouping rules, to join related data.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “regex”: “SmartSpot”,
    “destination”: “othersmartspots”,
    “fiware_service_path”: “smartspot”,
    “fields”: [“entityType”]
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-grouping-rules-v1-beta">
<h3>Retrieve grouping rules v1 (beta)<a class="headerlink" href="#retrieve-grouping-rules-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="5%" />
<col width="36%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/groupingrules</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve all grouping rules.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “grouping_rules”: [
        {
            “destination”: “group_id”,
            “fields”: [
                “entityType”
            ],
            “fiware_service_path”: “service_path”,
            “id”: 1,
            “regex”: “entity_id”
        }
    ],
    “success”: “true”
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="update-grouping-rules-v1-beta">
<h3>Update grouping rules v1 (beta)<a class="headerlink" href="#update-grouping-rules-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="4%" />
<col width="32%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/groupingrules?id={{fiware-groupID}}</td>
<td rowspan="3">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to update a grouping rules.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-gropuID</strong>: Name of group we want to update.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “regex”: “SmartSpot”,
    “destination”: “othersmartspots”,
    “fiware_service_path”: “smartspot”,
    “fields”: [“entityType”]
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="delete-grouping-rules-v1-beta">
<h3>Delete grouping rules v1 (beta)<a class="headerlink" href="#delete-grouping-rules-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="4%" />
<col width="28%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/groupingrules?id={{fiware-groupID}}</td>
<td rowspan="3">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete a grouping rules defined as a parameter.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-gropuID</strong>: Name of group we want to delete.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="create-subscription-for-orion-v1-beta">
<h3>Create subscription for Orion v1 (beta)<a class="headerlink" href="#create-subscription-for-orion-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="4%" />
<col width="28%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/subscriptions?id=ngsi_version=1</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a subscription to one or many entities in Orion.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscription”:{
        “entities”: [
            {
                “type”: “entity_type”,
                “isPattern”: “false”,
                “id”: “entity_id”
            }
        ],
        “attributes”: [],
        “reference”: “http://reference_host:reference_port”,
        “duration”: “P1M”,
        “notifyConditions”: [
            {
                “type”: “ONCHANGE”,
                “condValues”: []
            }
        ],
        “throttling”: “PT5S”
    },
    “endpoint”:{
        “host”:”endpoint_host”,
        “port”:”endpoint_port”,
        “ssl”:”false”,
        “xauthtoken”:”234123123123123”
    }
}
</pre></div>
</div>
<ul class="simple">
<li><strong>isPattern</strong>: Currently is hasn’t use. Always ‘false’.</li>
<li><strong>id</strong>: To which entity it wants to subscribe. In this case, to all entities of those type.</li>
<li><strong>reference</strong>: URL of client that it want to subscribe.</li>
<li><strong>duration</strong>: The duration of the subscription. In ISO 8601 standard format.</li>
<li><strong>notifyConditions</strong>: Define the launcher to notify the subscriptions. In this case, when change a value of attributes passed in the point “condValues” of an entity will launch a notification.</li>
<li><strong>throttling</strong>: Specify a minimum inter-notification arrival time. In this case, 5 seconds.</li>
<li><strong>endpoint</strong>: URL of Orion server.</li>
</ul>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” with information about the subscription (duration, throttling, subscriptionId).

In case of wrong execution return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="create-subscription-for-orion-v2-beta">
<h3>Create subscription for Orion v2 (beta)<a class="headerlink" href="#create-subscription-for-orion-v2-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="4%" />
<col width="28%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/subscriptions?id=ngsi_version=2</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a subscription to one or many entities in Orion.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “subscription”:{
        “description”: “subscription_description”,
        “subject”: {
            “entities”: [
                {
                    “idPattern”: “.*”,
                    “type”: “entity_type”
                }
            ],
            “condition”: {
                “attrs”: [
                    “attribute_entity”
                ],
                “expression”: {
                    “q”: “attribute_entity&gt;40”
                }
            }
        },
        “notification”: {
            “http”: {
                “url”: “http://localhost:1234”
            },
            “attrs”: [
                “attribute_entity”
            ]
        },
        “expires”: “2016-05-05T14:00:00.00Z”,
        “throttling”: 5
    },
    “endpoint”:{
        “host”:”&lt;endpoint_host&gt;”,
        “port”:”&lt;endpoint_port&gt;”,
        “ssl”:”false”,
        “xauthtoken”:”QsENv6AJj7blCqJ0YvfS5hMWYs”
    }
}
</pre></div>
</div>
<ul class="simple">
<li><strong>type</strong>: To which entity it wants to subscribe. In this case, to all entities of those type.</li>
<li><strong>condition</strong>: Conditions that have to be fulfill for launch to notification.</li>
<li><strong>expires</strong>: The duration of the subscription, when it expires.</li>
<li><strong>notification</strong>: URL of client that it want to subscribe (cygnus_url) and the attributes that we want know.</li>
<li><strong>throttling</strong>: Specify a minimum inter-notification arrival time. In this case, 5 seconds.</li>
<li><a href="#id6"><span class="problematic" id="id7">**</span></a>endpoint: URL of Orion server.</li>
</ul>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” with information about the subscription (duration, throttling, subscriptionId).

In case of wrong execution return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-subscription-v1-beta">
<h3>Retrieve subscription v1 (beta)<a class="headerlink" href="#retrieve-subscription-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="3%" />
<col width="21%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/subscriptions?id=ngsi_version={{orion-version}}&amp;subscription_id={{fiware-subscription}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to retrieve a subscription to one or many entities in Orion of cygnus.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>orion-version</strong>: Version of Orion to do this method.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” with information about the subscription.

In case of wrong execution by inexistent subscription id, invalid or not implemented NGSI version or missing parameters return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-subscriptions-v1-beta">
<h3>Retrieve subscriptions v1 (beta)<a class="headerlink" href="#retrieve-subscriptions-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="3%" />
<col width="27%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/subscriptions?id=ngsi_version={{orion-version}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to retrieve all subscriptions in Orion of cygnus.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>orion-version</strong>: Version of Orion to do this method.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” with information about all subscriptions.

In case of wrong execution by invalid or not implemented NGSI version or missing parameters return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="delete-subscription-v1-beta">
<h3>Delete subscription v1 (beta)<a class="headerlink" href="#delete-subscription-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="3%" />
<col width="25%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/subscriptions?id=ngsi_version={{orion-version}}&amp;subscription_id={{subscription-id}}</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to delete a subscription in Orion of cygnus.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>orion-version</strong>: Version of Orion to do this method.</td>
</tr>
<tr class="row-odd"><td><strong>subscription-id</strong>: ID of subscription we want to delete.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true, result: subscription deleted”.

In case of wrong execution by invalid or not implemented NGSI version, wrong subscription id, missing authentication token or missing fields return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="create-appender-v1-beta">
<h3>Create appender v1 (beta)<a class="headerlink" href="#create-appender-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="3%" />
<col width="42%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{portcygnus}}/v1/admin/log/appenders?transient={{fiware-transient}}</td>
<td rowspan="3">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to create an appender in a running logger.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “appender”: {
        “name”:”appender_id”,
        “class”:”appender_class”
    },
    “pattern”: {
        “layout”:”.....”,
        “ConversionPattern”:”.....”
    }
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true, result: Appender ‘appender_id’ put”.

In case of wrong execution by invalid transient or without JSON return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-appender-v1-beta">
<h3>Retrieve appender v1 (beta)<a class="headerlink" href="#retrieve-appender-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="3%" />
<col width="40%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{portcygnus}}/v1/admin/log/appenders?name={{fiware-appender}}&amp;transient={{fiware-transient}}</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to retrieve a defined appender.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-appender</strong>: Name of appender we want to retrieve.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” join to appender information.

In case of wrong execution by invalid transient or invalid appender name return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-appenders-v1-beta">
<h3>Retrieve appenders v1 (beta)<a class="headerlink" href="#retrieve-appenders-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="3%" />
<col width="42%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/log/appenders?transient={{fiware-transient}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to retrieve all appenders in a running logger.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” join to the information about all appenders.

In case of wrong execution by invalid transient or appenders not be shown return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="update-appender-v1-beta">
<h3>Update appender v1 (beta)<a class="headerlink" href="#update-appender-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="3%" />
<col width="42%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/log/appenders?transient={{fiware-transient}}</td>
<td rowspan="3">PUT</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to update an appender in a running logger.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “appender”: {
        “name”:”appender_id”,
        “class”:”appender_class”
    },
    “pattern”: {
        “layout”:”.....”,
        “ConversionPattern”:”.....”
    }
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “{&quot;success&quot;: &quot;true&quot;,&quot;result&quot;: &quot;Appender &#39;appender_id&#39; updated successfully”}”.

In case of wrong execution by invalid transient or without JSON return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="delete-appender-v1-beta">
<h3>Delete appender v1 (beta)<a class="headerlink" href="#delete-appender-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="3%" />
<col width="40%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/log/appenders?name={{fiware-appender}}&amp;transient={{fiware-transient}}</td>
<td rowspan="4">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to delete a defined appender.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-appender</strong>: Name of appender we want to delete.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid transient or invalid appender name return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="delete-appenders-v1-beta">
<h3>Delete appenders v1 (beta)<a class="headerlink" href="#delete-appenders-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="3%" />
<col width="46%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/log/appenders?transient={{fiware-transient}}</td>
<td rowspan="3">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete all appenders.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid transient return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="create-logger-v1-beta">
<h3>Create logger v1 (beta)<a class="headerlink" href="#create-logger-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="3%" />
<col width="43%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/log/loggers?transient={{fiware-transient}}</td>
<td rowspan="3">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to create a logger in a running Cygnus.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “logger”: {
        “name”:”logger_id”,
        “level”:”.....”
    }
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true, result: logger ‘logger_id’ put.”

In case of wrong execution by invalid transient or without JSON return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-logger-v1-beta">
<h3>Retrieve logger v1 (beta)<a class="headerlink" href="#retrieve-logger-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="3%" />
<col width="41%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/log/loggers?name={{fiware-logger}}&amp;transient={{fiware-transient}}</td>
<td rowspan="4">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to retrieve a defined logger.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-logger</strong>: Name of logger we want to retrieve.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” join to logger information.

In case of wrong execution by invalid transient or invalid logger name return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-loggers-v1-beta">
<h3>Retrieve loggers v1 (beta)<a class="headerlink" href="#retrieve-loggers-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="3%" />
<col width="42%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/log/loggers?transient={{fiware-transient}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to retrieve all loggers in a running Cygnus.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true” join to the information about all loggers.

In case of wrong execution by invalid transient or loggers not be shown return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="update-logger-v1-beta">
<h3>Update logger v1 (beta)<a class="headerlink" href="#update-logger-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="3%" />
<col width="43%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/log/loggers?transient={{fiware-transient}}</td>
<td rowspan="3">PUT</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to update a logger in a running Cygnus.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “appender”: {
        “name”:”logger_id”,
        “class”:”logger_class”
    },
    “pattern”: {
        “layout”:”.....”,
        “ConversionPattern”:”.....”
    }
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “{&quot;success&quot;: &quot;true&quot;,&quot;result&quot;: &quot;Logger &#39;logger_id&#39; updated successfully”}”.

In case of wrong execution by invalid transient or without JSON return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="delete-logger-v1-beta">
<h3>Delete logger v1 (beta)<a class="headerlink" href="#delete-logger-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="3%" />
<col width="41%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/log/loggers?name={{fiware-logger}}&amp;transient={{fiware-transient}}</td>
<td rowspan="4">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="4">Method to delete a defined logger.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
<tr class="row-odd"><td><strong>fiware-appender</strong>: Name of logger we want to delete.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid transient or invalid logger name return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="delete-loggers-v1-beta">
<h3>Delete loggers v1 (beta)<a class="headerlink" href="#delete-loggers-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="3%" />
<col width="46%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/log/loggers?transient={{fiware-transient}}</td>
<td rowspan="3">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete all loggers.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-trasient</strong>: If false the appenders are retrieved from Cygnus, if true are retrieved from file.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “success: true”.

In case of wrong execution by invalid transient return “success: false”.
</pre></div>
</div>
</div>
<div class="section" id="metrics">
<h3>Metrics<a class="headerlink" href="#metrics" title="Permalink to this headline">¶</a></h3>
<p>The metrics defined in a Cygnus agent are:</p>
<ul class="simple">
<li><strong>incomingTransactions</strong>: Number of incoming transactions. In other words, number of NGSI notifications received.</li>
<li><strong>incomingTransactionRequestSize</strong>: Total size of the requests related to incoming transactions (bytes).</li>
<li><strong>incomingTransactionResponseSize</strong>: Total size of the responses related to incoming transactions (bytes).</li>
<li><strong>incomingTransactionError</strong>: Number of incoming transactions causing an error.</li>
<li><strong>serviceTime</strong>: Average time between transaction requests reception and transaction responses sending.</li>
<li><strong>outgoingTransactions</strong>: Number of outgoing transactions. In other words, number of persistence operations.</li>
<li><strong>outgoingTransactionRequestSize</strong>: Total size of the requests related to outgoing transactions (bytes).</li>
<li><strong>outgoingTransactionResponseSize</strong>: Total size of the responses related to outgoing transactions (bytes).</li>
<li><strong>outgoingTransactionError</strong>: Number of outgoing transactions causing an error.</li>
</ul>
</div>
<div class="section" id="retrieve-metrics-v1-beta">
<h3>Retrieve metrics v1 (beta)<a class="headerlink" href="#retrieve-metrics-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="3%" />
<col width="47%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/metrics?reset={{fiware-reset}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to retrieve all metrics for a Cygnus agent.</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-reset</strong>: If true return metrics and inmediatelly after they are deleted , if false metrics don’t delete.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “200 OK” join to all metrics information.
</pre></div>
</div>
</div>
<div class="section" id="delete-metrics-v1-beta">
<h3>Delete metrics v1 (beta)<a class="headerlink" href="#delete-metrics-v1-beta" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="3%" />
<col width="47%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-cygnus}}/v1/admin/metrics</td>
<td rowspan="2">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to delete all metrics for a Cygnus agent (putting counters to zero).</td>
</tr>
<tr class="row-odd"><td><strong>port-cygnus</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “200 OK”.
</pre></div>
</div>
</div>
</div>
<div class="section" id="annex-5-iot-agent-lwm2m-restful-api">
<h2>ANNEX 5: IoT Agent LwM2M RESTFul API<a class="headerlink" href="#annex-5-iot-agent-lwm2m-restful-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-device-provisioning">
<h3>Create device Provisioning<a class="headerlink" href="#create-device-provisioning" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="4%" />
<col width="31%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-iotagent}}/iot/devices</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a device that we want to convert it in an entity.</td>
</tr>
<tr class="row-odd"><td><strong>port-iotagent</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “devices”: [
        {
            “device_id”: “name_device”,
            “entity_type”: “type_id”,
            “attributes”: [
                {
                    “name”: “attribute_name “,
                    “type”: “attribute_type”,
                }
            ],
            “lazy”: [
                {
                    “name”: “attribute_name “,
                    “type”: “attribute_type”
                }
            ],
            “commands”: [
                {
                    “name”: “command_id”,
                    “type”: “command_type”
                }
            ],
            “internal_attributes”: {
                “lmw2mResourceMapping”: {
                    “attribute_id”: {
                        “objectType”:
                        “objecInstance”:
                        “objectResource”: 1
                    }
                }
            }
        }
    ]
}
</pre></div>
</div>
<ul class="simple">
<li><strong>lazy</strong>: It a attribute to need explicit specification to can be read.</li>
<li><strong>commands</strong>: Commands you can send to the device.</li>
<li><strong>internal_attributes</strong>: Mapped of m2m language to entity attributes. Type, instance and source of each attribute of a entity.</li>
</ul>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns a confirmation that the device has been created correctly “201 Created”. In case of already any device with the same name,
return “400 Bad Request” with this message:

{
        “name”: “DUPLICATE_DEVICE_ID”,
        “message”: “A device with the same pair (Service, DeviceId) was found:…”
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="annex-6-deploy-and-use-of-grafana">
<h2>ANNEX 6: Deploy and use of Grafana<a class="headerlink" href="#annex-6-deploy-and-use-of-grafana" title="Permalink to this headline">¶</a></h2>
<div class="section" id="creation-and-execution-of-the-image-in-docker">
<h3>Creation and execution of the image in Docker<a class="headerlink" href="#creation-and-execution-of-the-image-in-docker" title="Permalink to this headline">¶</a></h3>
<p>HOP Ubiquitous has a version of their fiware avaiable in a Docker container which “se puede” can download from Github. If you haven´t done this step we recommend you that you download
the repository <a class="reference external" href="https://github.com/HOP-Ubiquitous/fiware-docker-infrastructure">https://github.com/HOP-Ubiquitous/fiware-docker-infrastructure</a> and you follow the recommend steps for its running.</p>
<p>Once we have execute the HOP Ubiquitous’s container, we must have the next processes execute on Docker (we can see it using the command “docker ps” in terminal):</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">CONTAINER</span> <span class="nx">ID</span>  <span class="nx">IMAGE</span>                           <span class="nx">PORTS</span>
<span class="mi">3996</span><span class="nx">f3dc01b5</span>  <span class="nx">iotagent</span>                        <span class="mf">0.0.0.0</span><span class="o">:</span><span class="mi">5693</span><span class="o">-&gt;</span><span class="mi">5683</span><span class="o">/</span><span class="nx">udp</span> <span class="nx">dockercompose_iotagent_1</span>
<span class="nx">e94378a74a38</span>  <span class="nx">smartsdk</span><span class="o">/</span><span class="nx">quantumleap</span>            <span class="mf">0.0.0.0</span><span class="o">:</span><span class="mi">8668</span><span class="o">-&gt;</span><span class="mi">8668</span><span class="o">/</span><span class="nx">tcp</span> <span class="nx">dockercompose_quantumleap_1</span>
<span class="nx">a57a750c86c8</span>  <span class="nx">grafana</span><span class="o">/</span><span class="nx">grafana</span>                 <span class="mf">0.0.0.0</span><span class="o">:</span><span class="mi">3000</span><span class="o">-&gt;</span><span class="mi">3000</span><span class="o">/</span><span class="nx">tcp</span> <span class="nx">dockercompose_grafana_1</span>
<span class="nx">e6ef4afd30f7</span>  <span class="nx">telefonicaiot</span><span class="o">/</span><span class="nx">fiware</span><span class="o">-</span><span class="nx">sth</span><span class="o">-</span><span class="nx">comet</span>  <span class="mf">0.0.0.0</span><span class="o">:</span><span class="mi">8666</span><span class="o">-&gt;</span><span class="mi">8666</span><span class="o">/</span><span class="nx">tcp</span> <span class="nx">dockercompose_sth_1</span>
<span class="nx">fa5fbce0c89e</span>  <span class="nx">fiware</span><span class="o">/</span><span class="nx">orion</span>                    <span class="mf">0.0.0.0</span><span class="o">:</span><span class="mi">1026</span><span class="o">-&gt;</span><span class="mi">1026</span><span class="o">/</span><span class="nx">tcp</span> <span class="nx">dockercompose_orion_1</span>
<span class="mi">6</span><span class="nx">a22f61d772f</span>  <span class="nx">fiware</span><span class="o">/</span><span class="nx">cygnus</span><span class="o">-</span><span class="nx">ngsi</span> <span class="mi">5050</span><span class="o">/</span><span class="nx">tcp</span>     <span class="mf">0.0.0.0</span><span class="o">:</span><span class="mi">8081</span><span class="o">-&gt;</span><span class="mi">8081</span><span class="o">/</span><span class="nx">tcp</span> <span class="nx">dockercompose_cygnus_1</span>
<span class="nx">a29f3c7f682f</span>  <span class="nx">crate</span><span class="o">:</span><span class="mf">1.0.5</span>                     <span class="mf">0.0.0.0</span><span class="o">:</span><span class="mi">4200</span><span class="o">-&gt;</span><span class="mi">4200</span><span class="o">/</span><span class="nx">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="o">:</span><span class="mi">4300</span><span class="o">-&gt;</span><span class="mi">4300</span><span class="o">/</span><span class="nx">tcp</span><span class="p">,</span> <span class="mi">5432</span><span class="o">-</span><span class="mi">5532</span><span class="o">/</span><span class="nx">tcp</span> <span class="nx">dockercompose_crate_1</span>
<span class="nx">a4652c49e3fa</span>  <span class="nx">mongo</span><span class="o">:</span><span class="mf">3.2</span>                       <span class="mf">0.0.0.0</span><span class="o">:</span><span class="mi">27016</span><span class="o">-&gt;</span><span class="mi">27017</span><span class="o">/</span><span class="nx">tcp</span> <span class="nx">dockercompose_mongo_1</span>
</pre></div>
</div>
<p>In case it is not executing some of this processes (as Grafana), we do the next process:</p>
<ol class="arabic simple">
<li>We stop the execution from Docker container – “<strong>docker-compose down</strong>”.</li>
<li>We remove the image of the application which is not running. – “<strong>docker rmi imageName</strong>”.</li>
<li>We back to execute the Docker container – “<strong>docker-compose up - d</strong>”.</li>
</ol>
</div>
<div class="section" id="data-source-definition-to-grafana">
<h3>Data source definition to Grafana<a class="headerlink" href="#data-source-definition-to-grafana" title="Permalink to this headline">¶</a></h3>
<p>Grafana is an open source API to generate dashboards from data contained in a CrateDB database. CrateDB is an open source SQL database design to store data of IoT devices. CrateDB is
not suitable with Orion Context Broker, which manage the entire lifecycle of information, so we need a connector between CrateDB and Orion Context Broker.</p>
<p>QuantumLeap is an API to connect CrateDB and Orion Context Broker, in other words, it convert Orion Context Broker information in a suitable datatype with CrateDB and store it
in this database.</p>
</div>
<div class="section" id="create-quantumleap-s-subscription-to-orion">
<h3>Create QuantumLeap’s subscription to Orion<a class="headerlink" href="#create-quantumleap-s-subscription-to-orion" title="Permalink to this headline">¶</a></h3>
<p>The next step is connect Data Source to Grafana. First we have to create a subscription from QuantumLeap to Orion to receive the changes from devices and it save on CrateDB database.
For it, we execute the POSTMAN program and we open the Orion collection. We enter in the “<strong>v2</strong>” / “<strong>subscriptions</strong>” / “<strong>create subscription v2</strong>” section and the body section we
defined the next subscription:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “description”: “grafana_subscription”,
    “subject”: {
        “entities”: [
            {
                “idPattern”: “.*”,
                “type”: “SmartSpot”
            }
        ]
    },
    “notification”: {
        “http”: {
            “url”: “http://192.168.1.16:8668/notify”
        },
        “attrs”: [
            “CO”,
            “H2S”,
            “NO2”,
            “O3”,
            “SO2”,
            “batteryLevel”,
            “humidity0”,
            “humidity1”,
            “temperature0”,
            “temperature1”,
            “nearDevicesHour”,
            “nearDevicesMinute”,
            “nearDevicesTenMinutes”,
            “noise”
        ],
        “metadata”: [“dateCreated”, “dateModified”]
    }
}
</pre></div>
</div>
<p>We prove that the subscription has been made correctly and it is active. Once it is active, we check the QuantumLeap log to see if work correctly. To access the log, we execute the command
“<strong>docker logs –follow dockercompose_quantumleap_1</strong>”. We must prove that QuantumLeap receive the subscription and it support the attributes of an entity type that we want store in CrateDB.</p>
<p>We have already connect our devices with the CrateDB database from QuantumLeap. Now is the moment to defined our data source on Grafana. Before configured CrateDB, we can check if it is
executing correctly. For it, we execute in Orion a GET method to the next address: <a class="reference external" href="http:/your_ip:4200/_sql">http:/your_ip:4200/_sql</a> and we check that exist the adequate data structure.</p>
</div>
<div class="section" id="connection-of-grafana-with-cratedb">
<h3>Connection of Grafana with CrateDB<a class="headerlink" href="#connection-of-grafana-with-cratedb" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="_images/grafana-configuration.png"><img alt="Grafana Configurantion Screen" class="align-center" src="_images/grafana-configuration.png" style="width: 650px;" /></a>
<p>The fi rst step is discover what our device ip is (with ifconfig command). Once we know our IP, we access to the next URL: <a class="reference external" href="http://your_ip:3000">http://your_ip:3000</a> (3000 is the port of grafana).</p>
<p>In the login from this URL we write in the user field: “<strong>admin</strong>” and in the password field: “<strong>admin</strong>”. We enter the data source section and we leave the setting file like this.</p>
<ul class="simple">
<li>Data source type in our case is, as we have named before, CrateDB.</li>
<li>The URL is you IP again, and 4200 is CrateDB port by default.</li>
<li>When everything is working inside the localhost, the access is direct.</li>
<li>QuantumLeap create a table “et” + name of the entity type which we have subscribed. In our case, being SmartSpot entities, the table it call “<strong>etsmartspot</strong>”.</li>
<li>The name of the index from time column is “dateobserved”. This name can see in the CrateDB structure.</li>
</ul>
<p>Grafana configuration to administrative level do it in the file <strong>/etc/grafana/grafana.ini</strong></p>
</div>
<div class="section" id="create-graphs-in-the-dashboard">
<h3>Create graphs in the dashboard<a class="headerlink" href="#create-graphs-in-the-dashboard" title="Permalink to this headline">¶</a></h3>
<p>The first step is to go to create menu and then pulse in new dashboard and we select the option “<strong>graph</strong>” and will appears a new graph. We press in “<strong>panel title</strong>” and different options
will appear.</p>
<p>The first that we have to do to create the graph is select the source where collect the data, for it in the “<strong>Data Source</strong>” section we have to press the “<strong>default</strong>” option and select
“<strong>Data Source</strong>” that we want to use.</p>
<p>Once the source is selected we have to realise a query to the database so that Grafana creates us a graph with that data. In the next section the Grafana interface provide us a query
structure to the database.</p>
<p>To select which attribute to show on the graph, we have to write on the “<strong>value</strong>” box of the “<strong>Select</strong>” section the attribute name which we want to look for. If we want to on the graph
appears the change of more than one attribute we have to press on “+” symbol which place on the right part of the “<strong>Select</strong>” section and another “<strong>Select</strong>” section will be shown us.</p>
<p>The “<strong>Select</strong>” section has by default the “<strong>Avg/Mean</strong>” option. This option returns the data mean of that attribute. This option is useful if we want to know all changes of an attribute
over time and there are multiple entities in the database. In the case that only we want to show the change of values of an attribute belonging to an entity, we have to insert in the
“<strong>Where</strong>” section the comparison “<strong>id == EntityName</strong>” and we have to press on “<strong>Avg/Mean</strong>” and select the “<strong>raw</strong>” option so that return us the changes of the attribute underwent
over time.</p>
<p>Once written the query we press the “<strong>Query Inspector</strong>” button and if the query which we have inserted it has been success then Grafana create a graph with the data of the attributes insert
in the query, else show us an error and reason for the error.</p>
</div>
<div class="section" id="realise-the-query-to-the-cratedb-database">
<h3>Realise the query to the CrateDB database<a class="headerlink" href="#realise-the-query-to-the-cratedb-database" title="Permalink to this headline">¶</a></h3>
<p>To realise the query to the database we have to execute the “<strong>POSTMAN</strong>” program and inside “<strong>fiware-grafana</strong>” collection there is a method called “<strong>retrieve grafana database</strong>”.
This method returns all IDs of the attributes and for each entity the values of their attributes, for it in the method body we define the next query:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “stmt”: “SELECT * FROM \”doc\”.\”etsmartspot\””
}
</pre></div>
</div>
<p>If we want to realise a query more specific to the database we only have to modify the method body and insert the query which we want to realise.</p>
</div>
</div>
<div class="section" id="annex-7-perseo-cep">
<h2>ANNEX 7: Perseo CEP<a class="headerlink" href="#annex-7-perseo-cep" title="Permalink to this headline">¶</a></h2>
<p>Perseo CEP is a distributed rule engine. It main objective is analyze the Orion’s entities data and perform actions (events) to notify the clients about the service. To notify, Perseo
can send a SMS or an e-mail. Events are received through a POST that contains the JSON representation, the rules to check and actions to generate in case the rules are complied with.</p>
<p>Basically, the Perseo operation is an event to trigger a rule, causing the selected values by EPL statements to send as a JSON to a set of URLs in a configuration file. In case of
trigger many of a rule, each will generate their own POST to the defined URL.</p>
</div>
<div class="section" id="annex-7-1-perseo-core">
<h2>ANNEX 7.1: Perseo-Core<a class="headerlink" href="#annex-7-1-perseo-core" title="Permalink to this headline">¶</a></h2>
<p>Perseo is compose of Perseo-core and Perseo-fe. Perseo-core is the back-end of the CEP, her rule engine. It is responsible of the incoming event’s checking through a POST that it contains
the EPL rules defining and, in case of must to execute an action, it informs to the Perseo-fe through a POST request. The defined rules aren’t stored persistently, but kept in memory, and
it can be update from Perseo-fe.</p>
<p>The rules is defined from a request POST with the rule expression in EPL, rule language of Esper. Esper is a Java library that contains the rule engine and the events processing logic.</p>
<a class="reference internal image-reference" href="_images/perseo-core-diagram.png"><img alt="Perseo Core Diagram" class="align-center" src="_images/perseo-core-diagram.png" style="width: 430px;" /></a>
<div class="section" id="retrieve-rules">
<h3>Retrieve rules<a class="headerlink" href="#retrieve-rules" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="5%" />
<col width="36%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseo-core}}/perseo-core/rules/</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve all exists rules.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseo-core</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the rules with a JSON representation and “200 OK”.

In case of not have any rule, return “[]”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-rule">
<h3>Retrieve rule<a class="headerlink" href="#retrieve-rule" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="4%" />
<col width="31%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseo-core}}/perseo-core/rules/{{fiware-rule}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to retrieve the defined rule as parameter.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseo-core</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-rule</strong>: Name of the rule we want retrieve.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the defined rule with a JSON representation and “200 OK”.

In case of not have any rule with this name, return “404”.
</pre></div>
</div>
</div>
<div class="section" id="create-update-rule">
<h3>Create/Update rule<a class="headerlink" href="#create-update-rule" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="4%" />
<col width="30%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseo-core}}/perseo-core/rules/</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a new rule or update it if exist the defined rule.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseo-core</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name”: “
    CO_email”,
    “text”: “select *,\”CO_email\” as ruleName, *,smartspot.CO? as CO, smartspot.id? as SmartSpot from pattern [every smartspot=iotEvent(cast(cast(SmartSpot?,String),float)&gt;1.5 and type=\”SmartSpot\”)]”,
    “action”: [
        {
            “type”: “email”,
            “template”: “CO ${SmartSpot} tiene un CO ${CO} (GEN RULE)”,
            “parameters”: {
                    “to”: “user@hopu.eu”,
                    “from”: “admin@hopu.eu”,
                    “subject”: “${SmartSpot} ha cambiado”
            }
        }
    ]
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the new rule created or updated in a JSON representation and “200 OK”.

In case of wrong execution, return “400 Bad Request”.
</pre></div>
</div>
</div>
<div class="section" id="update-rule">
<h3>Update rule<a class="headerlink" href="#update-rule" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="4%" />
<col width="35%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseo-core}}/perseo-core/rules/</td>
<td rowspan="2">PUT</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to update a rule or set of rules.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseo-core</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name”: “co_update”,
    “text”: “select *,\”co_update\” as ruleName from pattern [every ev=iotEvent(cast(cast(CO?,String),float)&gt;1.5 and type=\”SmartSpot\”)]”,
    “action”: {
        “type”: “update”,
        “parameters”: {
            “attributes”: [
                {
                    “name”: “abnormal”,
                    “value”: “true”,
                    “type”: “boolean”
                },
                {
                    “name”: “CO”,
                    “value”: 12.34,
                    “type”: “Number”
                }
            ]
        }
    }
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “200 OK” with an empty JSON object “[]”.

In case of wrong execution, return “400 Bad Request”.
</pre></div>
</div>
</div>
<div class="section" id="delete-rule">
<h3>Delete rule<a class="headerlink" href="#delete-rule" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="4%" />
<col width="31%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseo-core}}/perseo-core/rules/{{fiware-rule}}</td>
<td rowspan="3">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete a defined rule as parameter.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseo-core</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>fiware-rule</strong>: Name of the rule we want retrieve.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the deleted rule in a JSON representation and “200 OK”.

In case of not have any rule with this name, return “200” OK with an empty JSON object “[]”.
</pre></div>
</div>
</div>
<div class="section" id="create-event">
<h3>Create event<a class="headerlink" href="#create-event" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="4%" />
<col width="35%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseo-core}}/perseo-core/events</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to send an event to the rule engine.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseo-core</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “noticeId”:”21f12c40-1ca6-11e4-a992-f1e158aa3052”,
    “received”:”2014-08-05T13:40:58.756Z”,
    “id”:”Prueba_de_ubicacion”,
    “type”:”SmartSpot”,
    “isPattern”:”false”,
    “CO”:”2.3202312”,
    “CO type”:”number”,
    “TimeInstant”:”2014-04-29T13:18:05Z”,
    “TimeInstant type”:”urn:x-ogc:def:trs:IDAS:1.0:ISO8601”
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “200 OK” with an empty JSON object “[]”.

In case of wrong execution, return “400 Bad Request”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-log">
<h3>Retrieve log<a class="headerlink" href="#retrieve-log" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="4%" />
<col width="32%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseo-core}}/perseo-core/admin/log</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve the logging level of Perseo-Core.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseo-core</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns the logging level of Perseo-Core and “200 OK”. The loggins level can be “DEBUG”, “INFO”, “WARN”, “WARNING”,
“ERROR” and “FATAL”.

In case of wrong execution, return “400 Bad Request”.
</pre></div>
</div>
</div>
<div class="section" id="update-log-level">
<h3>Update log level<a class="headerlink" href="#update-log-level" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="3%" />
<col width="47%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseocore}}/perseo-core/admin/log?level={{perseo-level}}</td>
<td rowspan="3">PUT</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to update the logging level of Perseo-Core.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseo-core</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>perseo-level</strong>: Logging level of Perseo-Core. Can be “<em>DEBUG</em>”, “<em>INFO</em>”, “<em>WARN</em>”, “<em>WARNING</em>”, “<em>ERROR</em>” and “<em>FATAL</em>”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “200 OK” with an empty JSON object “[]”.

In case of wrong execution by incorrect value in “perseo-level”, return “400 Bad Request”.
</pre></div>
</div>
</div>
</div>
<div class="section" id="annex-7-2-perseo-fe">
<h2>ANNEX 7.2: Perseo-Fe<a class="headerlink" href="#annex-7-2-perseo-fe" title="Permalink to this headline">¶</a></h2>
<p>Perseo-fe is a component that together with Perseo-core form the Perseo fiware. Perseo-fe refresh all of set of rules of Perseo-core. When Perseo-core send a “action” to Perseo-fe, it is
responsible of send an action via SMS, email o HTTP.</p>
<p>In order for Perseo can send a notification, it must have configured the following servers: SMPP, SMTP and HTTP.</p>
<p>SMPP server allows Perseo to send an action to a recipient via SMS. In order to create the SMS, the action must have in one of its fields the number of recipient who that to will receive
the SMS.</p>
<p>SMTP server allows Perseo to send to a recipient an action via SMS. In order to create the e-mail, the action must have in one of its field the e-mail of the sender and the e-mail of the
recipient.</p>
<p>HTTP server allows an HTTP POST to be performed to a URL provided in a field of the action.</p>
<div class="section" id="retrieve-version">
<h3>Retrieve version<a class="headerlink" href="#retrieve-version" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="5%" />
<col width="35%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/version</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve the currently version of Perseo.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “200 OK” with information of Perseo version.

In case of wrong execution, return “400 Bad Request”.
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h3>Retrieve rules<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="5%" />
<col width="38%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/rules</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve all rules from Perseo.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the rules with a JSON representation and “200 OK”.

In case of not have any rule, return “[]”.
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h3>Retrieve rule<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="5%" />
<col width="37%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/rules/{{rule-id}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Retrieve a rule from the service.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>rule-id</strong>: ID of the rule which will be retrieved.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the defined rule with a JSON representation and “200 OK”.

In case of not have any rule with this name, return “404”.
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h3>Delete rule<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="5%" />
<col width="43%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/rules/{{rule-id}}</td>
<td rowspan="3">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete a rule.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>rule-id</strong>: ID of the rule which will be deleted from Perseo.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the deleted rule in a JSON representation and “200 OK”.

In case of not have any rule with this name, return “200” OK with an empty JSON object “[]”.
</pre></div>
</div>
</div>
<div class="section" id="create-rule">
<h3>Create rule<a class="headerlink" href="#create-rule" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="5%" />
<col width="46%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/rules</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a new rule.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name”: “CO_email”,
    “text”: “select *,\”CO_email\” as ruleName, *,ev.CO? as CO, ev.id? as SmartSpot from pattern [every ev=iotEvent(cast(cast(CO?,String),float)&gt;1.5 and type=\”SmartSpot\”)]”,
    “action”: [
        {
            “type”: “email”,
            “template”: “SmartSpot ${SmartSpot} has CO ${CO} (GEN RULE)”,
            “parameters”: {
                “to”: “user@hopu.eu”,
                “from”: “admin@hopu.eu”,
                “subject”: “${CO} has changed”
            }
        }
    ]
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the new rule created in a JSON representation and “200 OK”.

In case of wrong execution, return “400 Bad Request”.
</pre></div>
</div>
</div>
<div class="section" id="create-notification">
<h3>Create notification<a class="headerlink" href="#create-notification" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="5%" />
<col width="43%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/notices</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a new notification.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “contextResponses”: [
        {
            “contextElement”:{
                “attributes”: [
                    {
                        “metadatas”: [
                            {
                                “name”: “previousValue”,
                                “type”: “Number”,
                                “value”: “11”
                            },
                            {
                                “name”: “actionType”,
                                “type”: “Text”,
                                “value”: “update”
                            }
                        ],
                        “name”: “A”,
                        “type”: “Number”,
                        “value”: “12”
                    }
                ],
                “id”: “Prueba_de_ubicacion”,
                “isPattern”: “false”,
                “type”: “SmartSpot”
            },
            “statusCode”: {
                “code”: “200”,
                “reasonPhrase”: “OK”
            }
        }
    ],
    “originator”: “localhost”,
    “subscriptionId”: “123456789”
}
</pre></div>
</div>
</div>
<div class="section" id="retrieve-visual-rules">
<h3>Retrieve visual rules<a class="headerlink" href="#retrieve-visual-rules" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="5%" />
<col width="35%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/m2m/vrules</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve all visual rules from Perseo.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">All</span> <span class="nx">visual</span> <span class="nx">rules</span> <span class="nx">from</span> <span class="nx">Perseo</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-visual-rule">
<h3>Retrieve visual rule<a class="headerlink" href="#retrieve-visual-rule" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="4%" />
<col width="37%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/m2m/vrules/{{rule-id}}</td>
<td rowspan="3">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Retrieve a visual rule from the service.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>rule-id</strong>: ID of the visual rule which will be retrieved.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the defined visual rule with a JSON representation and “200 OK”.

In case of not have any rule with this name, return “404”.
</pre></div>
</div>
</div>
<div class="section" id="create-visual-rule">
<h3>Create visual rule<a class="headerlink" href="#create-visual-rule" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="5%" />
<col width="41%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/m2m/vrules</td>
<td rowspan="2">POST</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to create a new visual rule.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name” : “prueba-test”,
    “active” : 1,
    “cards” : [
        {
            “type” : “ActionCard”,
            “actionData” : {
                “userParams” : [
                    {
                        “name” : “mail.from”,
                        “value” : “dca_support@tid.es”
                    }
                ],
                “name” : “email”,
                “type” : “SendEmailAction”
            },
            “id” : “card_42”,
            “connectedTo” : [ ]
        }
    ]
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the new visual rule created in a JSON representation and “200 OK”.

In case of wrong execution, return “400 Bad Request”.
</pre></div>
</div>
</div>
<div class="section" id="delete-visual-rule">
<h3>Delete visual rule<a class="headerlink" href="#delete-visual-rule" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="4%" />
<col width="45%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/m2m/vrules/{{vrule-id}}</td>
<td rowspan="3">DELETE</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to delete a rule.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>vrule-id</strong>: ID of the virtual rule which will be deleted from Perseo.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the deleted virtual rule in a JSON representation and “200 OK”.

In case of not have any virtual rule with this name, return “200” OK with an empty JSON object.
</pre></div>
</div>
</div>
<div class="section" id="update-visual-rule">
<h3>Update visual rule<a class="headerlink" href="#update-visual-rule" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="4%" />
<col width="40%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/m2m/vrules/{{vrule-id}}</td>
<td rowspan="3">PUT</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to update an existing visual rule.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>vrule-id</strong>: ID of the virtual rule which will be updated from Perseo.</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name” : “prueba-test”,
    “active” : 1,
    “cards” : [
        {
            “type” : “ActionCard”,
            “actionData” : {
                “userParams” : [
                    {
                        “name” : “mail.from”,
                        “value” : “dca_support@tid.es”
                    }
                ],
                “name” : “email”,
                “type” : “SendEmailAction”
            },
            “id” : “card_42”,
            “connectedTo” : [ ]
        }
    ]
}
</pre></div>
</div>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns in the body the visual rule updated in a JSON representation and “200 OK”.

In case of wrong execution, return “400 Bad Request”.
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h3>Retrieve log<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="4%" />
<col width="42%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/admin/log</td>
<td rowspan="2">GET</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="2">Method to retrieve the logging level of Perseo-Fe.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns the logging level of Perseo-Core and “200 OK”. The loggins level can be “DEBUG”, “INFO”, “WARN”, “WARNING”,
“ERROR” and “FATAL”.

In case of wrong execution, return “400 Bad Request”.
</pre></div>
</div>
</div>
<div class="section" id="retrieve-log-level">
<h3>Retrieve log level<a class="headerlink" href="#retrieve-log-level" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="3%" />
<col width="50%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Method</th>
<th class="head">URL Params</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3"><a class="reference external" href="http:/">http:/</a>/{{url}}:{{port-perseoFe}}/admin/log?level={{perseo-level}}</td>
<td rowspan="3">PUT</td>
<td><strong>url</strong>: Link to the service that will be consulted.</td>
<td rowspan="3">Method to update the logging level of Perseo-Fe.</td>
</tr>
<tr class="row-odd"><td><strong>port-perseoFe</strong>: Port to connect with the service.</td>
</tr>
<tr class="row-even"><td><strong>perseo-level</strong>: Logging level of Perseo-Core. Can be “<em>DEBUG</em>”, “<em>INFO</em>”, “<em>WARN</em>”, “<em>WARNING</em>”, “<em>ERROR</em>” and “<em>FATAL</em>”.</td>
</tr>
</tbody>
</table>
<p>Return:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>In case of performing the method correctly, returns “200 OK” with an empty JSON object “[]”.

In case of wrong execution by incorrect value in “perseo-level”, return “400 Bad Request”.
</pre></div>
</div>
</div>
</div>
<div class="section" id="annex-7-3-perseo-use-cases">
<h2>ANNEX 7.3: Perseo Use Cases<a class="headerlink" href="#annex-7-3-perseo-use-cases" title="Permalink to this headline">¶</a></h2>
<p>As we have seen in the introduction, Perseo-Fe makes an action before changes of values of Entities of Orion. These actions usually are notifications to user. Currently, the notification
to user can be done of the following ways:</p>
<ul class="simple">
<li>Update. Update the attributes of an Orion entity when some value of an attribute is different to expected.</li>
<li>Post. Send to a REST service a HTTP message to notify different situation than normal.</li>
<li>Twitter. Post a tweet with the information relevant to notify some value.</li>
<li>E-mail. Send an e-mail when an entity has some attribute a value different to the optimum.</li>
<li>SMS. Send a SMS when the values of an Orion entity are different to expected.</li>
</ul>
<p>In addition to normal notifications, there are complex notifications which add on the notification message statistics about the values (as means, totals, etc.).</p>
<p>For our use cases, we go to notify to user when CO value in a concrete SmartSport exceed a determinate value.</p>
<p>In first place, we must make a series of initial steps for the connection of Orion and Perseo:</p>
<p><strong>1. Create the subscription from Perseo-Fe to Orion.</strong></p>
<p>Perseo-Fe must be subscribe to Orion for be notified when the values of one or several attributes of one or several entities of a type concrete change. In our case, we want to be
notify when the CO value of the SmartSpot change. We make the next subscription on Orion:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “entities”: [
        {
            “type”: “SmartSpot”,
            “isPattern”: “true”,
            “id”: “.*”
        }
    ],
    “attributes”: [
        “CO”
    ],
    “reference”: “http://perseo-fe:9090/notices”,
    “duration”: “P1Y”,
    “notifyConditions”: [
        {
            “type”: “ONCHANGE”,
            “condValues”: [
                “CO”
            ]
        }
    ],
    “throttling”: “PT1S”
}
</pre></div>
</div>
<p><strong>2. Create a SmartSpot.</strong></p>
<p>In case don´t have some SmartSpot create on Orion, we create the next test SmartSpot.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “contextElements”: [
        {
            “type”: “SmartSpot”,
            “isPattern”: “false”,
            “id”: “Prueba_de_ubicacion”,
            “attributes”: [
                {
                    “name”: “CO”,
                    “type”: “Number”,
                    “value”: “0.7626428598980013”
                }
            ]
        }
    ],
    “updateAction”: “APPEND”
}
</pre></div>
</div>
<p>We can verify if Perseo-Fe receive correct notifications from Orion checking their log, for it, we execute about terminal
the next command: <strong>docker logs dockercompose_perseo-fe_1 –follow</strong></p>
<div class="section" id="update">
<h3>Update<a class="headerlink" href="#update" title="Permalink to this headline">¶</a></h3>
<p>It serves to update or put attributes of an Orion entity when the value of the CO of the SmartSport excedes 1’5. The steps to follow:</p>
<p><strong>1. Create an UPDATE rule in Peseo-Fe.</strong></p>
<p>We create the next rule which add the attributes “abnormal” and “other” in case the CO of any “SmartSpot” entity have a value greater than 1’5.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name”: “CO_update”,
    “text”: “select *,\”CO_update\” as ruleName from pattern [every ev=iotEvent(cast(cast(CO?,String),float)&gt;1.5 and type=\”SmartSpot\”)]”,
    “action”: {
        “type”: “update”,
        “parameters”: {
            “attributes”: [
                {
                    “name”: “abnormal”,
                    “value”: “true”,
                    “type”: “boolean”
                },
                {
                    “name”: “other”,
                    “value”: 12.34,
                    “type”: “Number”
                }
            ]
        }
    }
}
</pre></div>
</div>
<p><strong>2. Update our SmartSpot.</strong></p>
<p>We update the value of the CO of our SmartSpot of test increasing the CO to a value greater than 1’5.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “contextElements”: [
        {
            “type”: “SmartSpot”,
            “isPattern”: “false”,
            “id”: “Prueba_de_ubicacion”,
            “attributes”: [
                {
                    “name”: “CO”,
                    “type”: “Number”,
                    “value”: “1.7626428598980013”
                }
            ]
        }
    ],
    “updateAction”: “UPDATE”
}
</pre></div>
</div>
<p><strong>3. Check the results.</strong></p>
<p>We back obtain the entity of test of our SmartSpot to check that , in effect, these two attributes have been created.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>[
    {
        “id”: “Prueba_de_ubicacion”,
        “type”: “SmartSpot”,
        “CO”: {
            “type”: “Number”,
            “value”: “1.7626428598980013”,
            “metadata”: {}
        },
        “abnormal”: {
            “type”: “boolean”,
            “value”: “true”,
            “metadata”: {}
        },
        “other”: {
            “type”: “Number”,
            “value”: “12.34”,
            “metadata”: {}
        }
    }
]
</pre></div>
</div>
</div>
<div class="section" id="post">
<h3>Post<a class="headerlink" href="#post" title="Permalink to this headline">¶</a></h3>
<p>In this example: Perseo-Fe sends a HTTP message when the value of the CO of the SmartSpot of test exceed 10’5. The steps to follow:</p>
<p><strong>1. Create a POST rule in Perseo-Fe.</strong></p>
<p>When the CO of some SmartSpot entity is greater than 10’5, we send a HTTP message with PUT method to URL <a class="reference external" href="http://localhost:8080">http://localhost:8080</a>/${type}/${id}. We define also header and body of the method.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name”:”CO_post”,
    “text”:”select \”CO_post\” as ruleName, * from pattern [everyev=iotEvent(cast(cast(CO?,String),float)&gt;10.5 and type=\”SmartSpot\”)]”,
    “action”:{
        “type”:”post”,
        “parameters”:{
            “url”: “http://localhost:8080/${type}/${id}”,
            “method”: “PUT”,
            “headers”: {
                “Content-type”: “application/json”,
                “X-CO”: “${CO}”
            },
            “qs”: {
                “bp”: “${CO}”,
                “id”: “${id}”,
                “${type}”: “${type}”
            },
            “json”: {
                “CO”: “${CO}”
            }
        }
    }
}
</pre></div>
</div>
<p><strong>2. Update our SmartSpot.</strong></p>
<p>We update the value of the CO of our SmartSpot of test increasing the CO to a value greater that 10`5.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “contextElements”: [
        {
            “type”: “SmartSpot”,
            “isPattern”: “false”,
            “id”: “Prueba_de_ubicacion”,
            “attributes”: [
                {
                    “name”: “CO”,
                    “type”: “Number”,
                    “value”: “20.7626428598980013”
                }
            ]
        }
    ],
    “updateAction”: “UPDATE”
}
</pre></div>
</div>
</div>
<div class="section" id="twitter">
<h3>Twitter<a class="headerlink" href="#twitter" title="Permalink to this headline">¶</a></h3>
<p>In this use case, Perseo-Fe publish a tweet in the Twitter account that we have passed the keys when, again, the CO value of the SmartSpot exceeds 1’5.</p>
<p>To normal operation of this action, we must obtain the Twitter keys to Perseo can connect with a defined Twitter account.</p>
<p><strong>1. Create a Twitter rule in Perseo-Fe.</strong></p>
<p>This rule is launched when the CO value of any entity of SmartSpot type exceeds 1’5. In this moment, Perseo publish the next Tweet: “SmartSpot ${SmartSpot} tiene un CO ${CO}.
Prueba realizada en &#64;HOPUbiquitous”. As parameters, we must have passed the Twitter keys.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name”:”CO_twitter”,
    “text”:”select *,\”CO_twitter\” as ruleName, *, ev.CO? as CO, ev.id? as SmartSpot from pattern [every ev=iotEvent(cast(cast(CO?,String),float)&gt;1.5 and type=\”SmartSpot\”)]”,
    “action”:{
        “type”:”twitter”,
        “template”:”SmartSpot ${SmartSpot} tiene un CO ${CO}. Prueba realizada en @HOPUbiquitous”,
        “parameters”:{
            “consumer_key”: “XX”,
            “consumer_secret”: “XX”,
            “access_token_key”: “XX”,
            “access_token_secret”: “XX”
        }
    }
}
</pre></div>
</div>
<p><strong>2. Update our SmartSpot.</strong></p>
<p>We update the CO value of our SmartSpot increase the CO to a value greater than 1’5.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “contextElements”: [
        {
            “type”: “SmartSpot”,
            “isPattern”: “false”,
            “id”: “Prueba_de_ubicacion”,
            “attributes”: [
                {
                    “name”: “CO”,
                    “type”: “Number”,
                    “value”: “1.7626428598980013”
                }
            ]
        }
    ],
    “updateAction”: “Update”
}
</pre></div>
</div>
</div>
<div class="section" id="e-mail">
<h3>E-mail<a class="headerlink" href="#e-mail" title="Permalink to this headline">¶</a></h3>
<p>In this example, Perseo-Fe send an e-mail to defined recipient when, again, the CO value of the SmartSpot exceeds 1’5.</p>
<p>To normal operation of this action, first, we must configured Perseo-Fe to define the SMTP server parameters.</p>
<p><strong>1. Configure the SMTP Server.</strong></p>
<p>We must configure SMTP server in the Perseo-Fe configuration. To that, in docker-compose.yml file, inside of Docker container fiware-docker-infraestructure of Hop Ubiquitous,
we added in the Perseo-Fe configuration file the next configuration lines:</p>
<ul class="simple">
<li>PERSEO_SMTP_HOST = smtp.servidor.com -&gt; Host of the SMTP server.</li>
<li>PERSEO_SMTP_PORT = 465 -&gt; Port of the SMTP server.</li>
<li>PERSEO_SMTP_SECURE = true -&gt; true if SSL should be used with the SMTP server.</li>
<li>PERSEO_SMTP_AUTH_USER = <a class="reference external" href="mailto:usuario&#37;&#52;&#48;hopu&#46;eu">usuario<span>&#64;</span>hopu<span>&#46;</span>eu</a> -&gt; Authentication data, the username.</li>
<li>PERSEO_SMTP_AUTH_PATH = xxx -&gt; Authentication data, the password for the user.</li>
</ul>
<p>In order for this changes have effect, we must reset the Docker container in case it is already booted.</p>
<p><strong>2. Create an E-mail rule in Perseo-Fe.</strong></p>
<p>This rule is launched when the CO value of any entity of SmartSpot type exceeds 1’5. In this moment, Perseo send the next e-mail: “CO ${SmartSpot} tiene un CO ${CO}. Es peligroso.”.
The e-mail will have “${SmartSpot} ha cambiado” as subject, the sender will be <a class="reference external" href="mailto:usuario&#37;&#52;&#48;hopu&#46;eu">usuario<span>&#64;</span>hopu<span>&#46;</span>eu</a> and the recipient will be <a class="reference external" href="mailto:usuario&#37;&#52;&#48;gmail&#46;com">usuario<span>&#64;</span>gmail<span>&#46;</span>com</a>.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name”: “CO_email”,
    “text”: “select *,\”CO_email\” as ruleName, *,smartspot.CO? as CO, smartspot.id? as Smart-Spot from pattern [every smartspot=iotEvent(cast(cast(SmartSpot?,String),float)&gt;1.5 and type=\”SmartSpot\”)]”,
    “action”: [
        {
            “type”: “email”,
            “template”: “CO ${SmartSpot} tiene un CO ${CO}. Es peligroso.”,
            “parameters”: {
                “to”: “usuario@gmail.com”,
                “from”: “usuario@hopu.eu”,
                “subject”: “${SmartSpot} ha cambiado”
            }
        }
    ]
}
</pre></div>
</div>
<p><strong>3. Update our SmartSpot.</strong></p>
<p>We update the CO value of our SmartSpot increase the CO to a value greater than 1’5.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “contextElements”: [
        {
            “type”: “SmartSpot”,
            “isPattern”: “false”,
            “id”: “Prueba_de_ubicacion”,
            “attributes”: [
                {
                    “name”: “CO”,
                    “type”: “Number”,
                    “value”: “20.7626428598980013”
                }
            ]
        }
    ],
    “updateAction”: “Update”
}
</pre></div>
</div>
</div>
<div class="section" id="sms">
<h3>SMS<a class="headerlink" href="#sms" title="Permalink to this headline">¶</a></h3>
<p>In this example, Perseo-Fe send an SMS to defined recipient when, again, the CO value of the SmartSpot exceeds 1’5.</p>
<p>To normal operation of this action, first, we must configured Perseo-Fe to define the SMPP server parameters and the SMS parameters.</p>
<p><strong>1. Configure the SMPP Server.</strong></p>
<p>We must configure SMTP server in the Perseo-Fe configuration. To that, in docker-compose.yml file, inside of Docker container fiware-docker-infraestructure of Hop Ubiquitous,
we added in the Perseo-Fe configuration file the next configuration lines:</p>
<ul class="simple">
<li>PERSEO_SMS_URL = localhost -&gt; URL for sending SMSs (SMPP Adapter).</li>
<li>PERSEO_SMS_API_KEY API KEY = XXX -&gt; API KEY for sending SMS, if necessary.</li>
<li>PERSEO_SMS_API_SECRET API SECRET = XXX -&gt; API SECRET for sending SMS, if necessary.</li>
<li>PERSEO_SMS_FROM = 987654123 -&gt; Field from for the outgoing SMSs.</li>
<li>PERSEO_SMPP_HOST = localhost -&gt; Host of the SMPP server.</li>
<li>PERSEO_SMPP_PORT = 3550 -&gt; Port of the SMPP server.</li>
<li>PERSEO_SMPP_SYSTEMID = user -&gt; SystemID for the user of the SMPP server.</li>
<li>PERSEO_SMPP_PASSWORD = password -&gt; Password for the user of the SMPP server.</li>
<li>PERSEO_SMPP_FROM = 987654123 -&gt; Number from SMS are sending by SMPP server.</li>
<li>PERSEO_SMPP_ENABLED = true -&gt; SMPP is default method for SMS instead of use SMS gateway.</li>
</ul>
<p>In order for this changes have effect, we must reset the Docker container in case it is already booted.</p>
<p><strong>2. Create a SMS rule in Perseo-Fe.</strong></p>
<p>This rule is launched when the CO value of any entity of SmartSpot type exceeds 1’5. In this moment, Perseo send the next SMS: “SmartSpot ${SmartSpot} tiene un CO ${CO}.”.
The recipient will be 636254XXX.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “name”:”CO_sms”,
    “text”:”select *,\”CO_sms\” as ruleName, *, smartspot.CO? as CO, smartspot.id? as SmartSpot from pattern [every smartspot=iotEvent(cast(cast(CO?,String),float)&gt;1.5 and type=\”SmartSpot\”)]”,
    “action”:{
        “type”:”sms”,
        “template”:”SmartSpot ${SmartSpot} tiene un CO ${CO}.”,
        “parameters”:{
            “to”:”636254XXX”
        }
    }
}
</pre></div>
</div>
<p><strong>3. Update our SmartSpot.</strong></p>
<p>We update the CO value of our SmartSpot increase the CO to a value greater than 1’5.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>{
    “contextElements”: [
        {
            “type”: “SmartSpot”,
            “isPattern”: “false”,
            “id”: “Prueba_de_ubicacion”,
            “attributes”: [
                {
                    “name”: “CO”,
                    “type”: “Number”,
                    “value”: “20.7626428598980013”
                }
            ]
        }
    ],
    “updateAction”: “Update”
}
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="links.html" class="btn btn-neutral float-right" title="HOP Ubiquitous - Relevant Links" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quick.html" class="btn btn-neutral" title="Smart Spot - Quick Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, HOP Ubiquitous.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.4.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>